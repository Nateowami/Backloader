!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.photonui=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(a,c){"object"==typeof b&&b.exports&&!a.Stone?b.exports=c():a.Stone=c()}(this,function(){function a(a,c){this.toString=b.bind(this,a,c)}function b(a,b){var c=a;if(m&&l[m]&&l[m][a]&&(c=l[m][a]),b)for(var d in b)c=c.replace(new RegExp("{"+d+"}","g"),b[d]);return c}function c(b,c){return new a(b,c)}function d(a){for(var b in a)l[b]=a[b]}function e(){return m}function f(a){m=a,n&&k(),h("stonejs-locale-changed")}function g(){var a=navigator.language||navigator.userLanguage||navigator.systemLanguage||navigator.browserLanguage||null;return a&&(a=a.toLowerCase()),a&&a.length>3&&(a=a.split(";")[0],a=a.split(",")[0],a=a.split("-")[0],a=a.split("_")[0],a.length>3&&(a=null)),a||"en"}function h(a,b){var b=b||{},c=null;try{c=new Event(a)}catch(d){c=document.createEvent("Event"),c.initEvent(a,!0,!1)}for(var e in b)c[e]=b[e];document.dispatchEvent(c)}function i(a){d(a.catalog)}function j(a){n=!!a,n&&k()}function k(){var a=document.getElementsByTagName("*"),c=null,d=null,e=0,f=0;for(e=0;e<a.length;e++)if(a[e].hasAttribute("stonejs")){for(a[e].hasAttribute("stonejs-orig-string")||a[e].setAttribute("stonejs-orig-string",a[e].innerHTML),c={},d=a[e].attributes,f=0;f<d.length;f++)0==d[f].name.indexOf("stonejs-param-")&&(c[d[f].name.substr(14)]=d[f].value);a[e].innerHTML=b(a[e].getAttribute("stonejs-orig-string"),c)}}var l={},m=null,n=!1;return document.addEventListener("stonejs-autoload-catalogs",i,!0),{LazyString:a,gettext:b,lazyGettext:c,addCatalogs:d,getLocale:e,setLocale:f,guessUserLanguage:g,enableDomScan:j,updateDomTranslation:k}})},{}],2:[function(b,c){!function(b){"undefined"!=typeof c&&c.exports?c.exports=b():"function"==typeof a&&"object"==typeof a.amd?a(b):this.Class=b()}(function(a){function b(a){return!j||/\B\$super\b/.test(a.toString())}function c(b,c,d){d===a?delete b[c]:b[c]=d}function d(b,c){return Object.prototype.hasOwnProperty.call(b,c)?b[c]:a}function e(a){i=!0;var b=new a;return i=!1,b}var f="1.4",g=this,h=g.Class,i=!1,j=function(){$super()}.toString().indexOf("$super")>0,k=function(){};return k.$noConflict=function(){try{c(g,"Class",h)}catch(a){g.Class=h}return k},k.$classyVersion=f,k.$extend=function(f){var h=this.prototype,j=e(this);if(f.__include__)for(var l=0,m=f.__include__.length;l!=m;++l){var n=f.__include__[l];for(var o in n){var p=d(n,o);p!==a&&(j[o]=n[o])}}if(f.__classvars__=f.__classvars__||{},j.__classvars__)for(var q in j.__classvars__)if(!f.__classvars__[q]){var p=d(j.__classvars__,q);f.__classvars__[q]=p}for(var o in f){var p=d(f,o);"__include__"!==o&&p!==a&&(j[o]="function"==typeof p&&b(p)?function(a,b){return function(){var e=d(this,"$super");this.$super=h[b];try{return a.apply(this,arguments)}finally{c(this,"$super",e)}}}(p,o):p)}var r=function(){if(!i){var a=g===this?e(arguments.callee):this;return a.__init__&&a.__init__.apply(a,arguments),a.$class=r,a}};for(var q in f.__classvars__){var p=d(f.__classvars__,q);p!==a&&(r[q]=p)}return r.prototype=j,r.constructor=r,r.$extend=k.$extend,r.$withData=k.$withData,r},k.$withData=function(b){var c=e(this);for(var f in b){var g=d(b,f);g!==a&&(c[f]=g)}return c},k})},{}],3:[function(b,c){!function(b,d){function e(){function a(){var b;return b=d("amd"),b.fork=a,b}return a()}function f(){function a(){var b;return b=d("CommonJS"),b.fork=a,b}c.exports=a()}function g(){function a(){function c(){var a,c;for(c=Array.prototype.slice.apply(arguments),a=0;a<f.length;a+=1)"undefined"==typeof g[f[a]]?delete b[f[a]]:b[f[a]]=g[f[a]];for(g={},a=0;a<c.length;a+=1){if("string"!=typeof c[a])throw new Error("Cannot replace namespaces. All new namespaces must be strings.");g[c[a]]=b[c[a]],b[c[a]]=e}return f=c}var e,f=[],g={};return e=d("global"),e.fork=a,e.noConflict=c,e}var c;c=a(),c.noConflict("KeyboardJS","k")}[].indexOf||(Array.prototype.indexOf=function(a,b,c){for(c=this.length,b=(c+~~b)%c;c>b&&(!(b in this)||this[b]!==a);b++);return b^c?b:-1}),"function"==typeof a&&a.amd?a(e):"undefined"!=typeof c?f():g()}(this,function(){function a(){window.addEventListener?(document.addEventListener("keydown",d,!1),document.addEventListener("keyup",e,!1),window.addEventListener("blur",c,!1),window.addEventListener("webkitfullscreenchange",c,!1),window.addEventListener("mozfullscreenchange",c,!1)):window.attachEvent&&(document.attachEvent("onkeydown",d),document.attachEvent("onkeyup",e),window.attachEvent("onblur",c))}function b(){c(),window.removeEventListener?(document.removeEventListener("keydown",d,!1),document.removeEventListener("keyup",e,!1),window.removeEventListener("blur",c,!1),window.removeEventListener("webkitfullscreenchange",c,!1),window.removeEventListener("mozfullscreenchange",c,!1)):window.detachEvent&&(document.detachEvent("onkeydown",d),document.detachEvent("onkeyup",e),window.detachEvent("onblur",c))}function c(a){H=[],k(),p(a)}function d(a){var b,c,d;if(b=f(a.keyCode),!(b.length<1)){for(a.isRepeat=!1,d=0;d<b.length;d+=1)c=b[d],-1!=v().indexOf(c)&&(a.isRepeat=!0),w(c);j(),o(a)}}function e(a){var b,c;if(b=f(a.keyCode),!(b.length<1)){for(c=0;c<b.length;c+=1)x(b[c]);k(),p(a)}}function f(a){return B[a]||[]}function g(a){var b;for(b in B)if(B.hasOwnProperty(b)&&B[b].indexOf(a)>-1)return b;return!1}function h(a,b){if("string"!=typeof a&&("object"!=typeof a||"function"!=typeof a.push))throw new Error("Cannot create macro. The combo must be a string or array.");if("object"!=typeof b||"function"!=typeof b.push)throw new Error("Cannot create macro. The injectedKeys must be an array.");C.push([a,b])}function i(a){var b;if("string"!=typeof a&&("object"!=typeof a||"function"!=typeof a.push))throw new Error("Cannot remove macro. The combo must be a string or array.");for(mI=0;mI<C.length;mI+=1)if(b=C[mI],q(a,b[0])){x(b[1]),C.splice(mI,1);break}}function j(){var a,b,c;for(a=0;a<C.length;a+=1)if(b=t(C[a][0]),-1===K.indexOf(C[a])&&r(b))for(K.push(C[a]),c=0;c<C[a][1].length;c+=1)w(C[a][1][c])}function k(){var a,b,c;for(a=0;a<K.length;a+=1)if(b=t(K[a][0]),r(b)===!1){for(c=0;c<K[a][1].length;c+=1)x(K[a][1][c]);K.splice(a,1),a-=1}}function l(a,b,c){function d(){var a;for(a=0;a<j.length;a+=1)I.splice(I.indexOf(j[a]),1)}function e(a){function b(){var b,d;for(b=0;b<c.length;b+=1)if("function"==typeof c[b])if("keyup"===a)for(d=0;d<j.length;d+=1)j[d].keyUpCallback.splice(j[d].keyUpCallback.indexOf(c[b]),1);else for(d=0;d<j.length;d+=1)j[d].keyDownCallback.splice(j[d].keyDownCallback.indexOf(c[b]),1)}var c,d,e,f={};if("string"!=typeof a)throw new Error("Cannot bind callback. The event name must be a string.");if("keyup"!==a&&"keydown"!==a)throw new Error('Cannot bind callback. The event name must be a "keyup" or "keydown".');for(c=Array.prototype.slice.apply(arguments,[1]),d=0;d<c.length;d+=1)if("function"==typeof c[d])if("keyup"===a)for(e=0;e<j.length;e+=1)j[e].keyUpCallback.push(c[d]);else if("keydown"===a)for(e=0;e<j.length;e+=1)j[e].keyDownCallback.push(c[d]);return f.clear=b,f}var f,g,h,i={},j=[];for("string"==typeof a&&(a=t(a)),g=0;g<a.length;g+=1){if(f={},h=u([a[g]]),"string"!=typeof h)throw new Error("Failed to bind key combo. The key combo must be string.");f.keyCombo=h,f.keyDownCallback=[],f.keyUpCallback=[],b&&f.keyDownCallback.push(b),c&&f.keyUpCallback.push(c),I.push(f),j.push(f)}return i.clear=d,i.on=e,i}function m(a){var b,c;for(b=0;b<I.length;b+=1)c=I[b],q(a,c.keyCombo)&&(I.splice(b,1),b-=1)}function n(a){var b,c,d;if(a){for(b=0;b<I.length;b+=1)for(d=I[b],c=0;c<d.keyCombo.length;c+=1)if(d.keyCombo[c].indexOf(a)>-1){I.splice(b,1),b-=1;break}}else I=[]}function o(a){var b,c,d,e,f,g,h,i,j,k,l,m=[];for(f=[].concat(H),b=0;b<I.length;b+=1)l=s(I[b].keyCombo).length,m[l]||(m[l]=[]),m[l].push(I[b]);for(c=m.length-1;c>=0;c-=1)if(m[c])for(b=0;b<m[c].length;b+=1){for(d=m[c][b],e=s(d.keyCombo),j=!0,i=0;i<e.length;i+=1)if(-1===f.indexOf(e[i])){j=!1;break}if(j&&r(d.keyCombo)){for(J.push(d),i=0;i<e.length;i+=1)k=f.indexOf(e[i]),k>-1&&(f.splice(k,1),i-=1);for(g=0;g<d.keyDownCallback.length;g+=1)d.keyDownCallback[g](a,v(),d.keyCombo)===!1&&(h=!0);h===!0&&(a.preventDefault(),a.stopPropagation())}}}function p(a){var b,c,d,e;for(b=0;b<J.length;b+=1)if(d=J[b],r(d.keyCombo)===!1){for(c=0;c<d.keyUpCallback.length;c+=1)d.keyUpCallback[c](a,v(),d.keyCombo)===!1&&(e=!0);e===!0&&(a.preventDefault(),a.stopPropagation()),J.splice(b,1),b-=1}}function q(a,b){var c,d,e;if(a=t(a),b=t(b),a.length!==b.length)return!1;for(c=0;c<a.length;c+=1){if(a[c].length!==b[c].length)return!1;for(d=0;d<a[c].length;d+=1){if(a[c][d].length!==b[c][d].length)return!1;for(e=0;e<a[c][d].length;e+=1)if(-1===b[c][d].indexOf(a[c][d][e]))return!1}}return!0}function r(a){var b,c,d,e,f,g,h=0;for(a=t(a),b=0;b<a.length;b+=1){for(g=!0,h=0,c=0;c<a[b].length;c+=1){for(d=[].concat(a[b][c]),e=h;e<H.length;e+=1)f=d.indexOf(H[e]),f>-1&&(d.splice(f,1),h=e);if(0!==d.length){g=!1;break}}if(g)return!0}return!1}function s(a){var b,c,d=[];for(a=t(a),b=0;b<a.length;b+=1)for(c=0;c<a[b].length;c+=1)d=d.concat(a[b][c]);return d}function t(a){var b=a,c=0,d=0,e=!1,f=!1,g=[],h=[],i=[],j="";if("object"==typeof a&&"function"==typeof a.push)return a;if("string"!=typeof a)throw new Error('Cannot parse "keyCombo" because its type is "'+typeof a+'". It must be a "string".');for(;" "===b.charAt(c);)c+=1;for(;;){if(" "===b.charAt(c)){for(;" "===b.charAt(c);)c+=1;e=!0}else if(","===b.charAt(c)){if(d||f)throw new Error("Failed to parse key combo. Unexpected , at character index "+c+".");f=!0,c+=1}else if("+"===b.charAt(c)){if(j.length&&(i.push(j),j=""),d||f)throw new Error("Failed to parse key combo. Unexpected + at character index "+c+".");d=!0,c+=1}else if(">"===b.charAt(c)){if(j.length&&(i.push(j),j=""),i.length&&(h.push(i),i=[]),d||f)throw new Error("Failed to parse key combo. Unexpected > at character index "+c+".");d=!0,c+=1}else if(c<b.length-1&&"!"===b.charAt(c)&&(">"===b.charAt(c+1)||","===b.charAt(c+1)||"+"===b.charAt(c+1)))j+=b.charAt(c+1),d=!1,e=!1,f=!1,c+=2;else{if(!(c<b.length&&"+"!==b.charAt(c)&&">"!==b.charAt(c)&&","!==b.charAt(c)&&" "!==b.charAt(c))){c+=1;continue}for((d===!1&&e===!0||f===!0)&&(j.length&&(i.push(j),j=""),i.length&&(h.push(i),i=[]),h.length&&(g.push(h),h=[])),d=!1,e=!1,f=!1;c<b.length&&"+"!==b.charAt(c)&&">"!==b.charAt(c)&&","!==b.charAt(c)&&" "!==b.charAt(c);)j+=b.charAt(c),c+=1}if(c>=b.length){j.length&&(i.push(j),j=""),i.length&&(h.push(i),i=[]),h.length&&(g.push(h),h=[]);break}}return g}function u(a){var b,c,d=[];if("string"==typeof a)return a;if("object"!=typeof a||"function"!=typeof a.push)throw new Error("Cannot stringify key combo.");for(b=0;b<a.length;b+=1){for(d[b]=[],c=0;c<a[b].length;c+=1)d[b][c]=a[b][c].join(" + ");d[b]=d[b].join(" > ")}return d.join(" ")}function v(){return[].concat(H)}function w(a){if(a.match(/\s/))throw new Error("Cannot add key name "+a+" to active keys because it contains whitespace.");H.indexOf(a)>-1||H.push(a)}function x(a){var b=g(a);"91"===b||"92"===b?H=[]:H.splice(H.indexOf(a),1)}function y(a,b){if("string"!=typeof a)throw new Error("Cannot register new locale. The locale name must be a string.");if("object"!=typeof b)throw new Error("Cannot register "+a+" locale. The locale map must be an object.");if("object"!=typeof b.map)throw new Error("Cannot register "+a+" locale. The locale map is invalid.");b.macros||(b.macros=[]),G[a]=b}function z(a){if(a){if("string"!=typeof a)throw new Error("Cannot set locale. The locale name must be a string.");if(!G[a])throw new Error("Cannot set locale to "+a+" because it does not exist. If you would like to submit a "+a+" locale map for KeyboardJS please submit it at https://github.com/RobertWHurst/KeyboardJS/issues.");B=G[a].map,C=G[a].macros,A=a}return A}var A,B,C,D,E,F={},G={},H=[],I=[],J=[],K=[];for(E={map:{3:["cancel"],8:["backspace"],9:["tab"],12:["clear"],13:["enter"],16:["shift"],17:["ctrl"],18:["alt","menu"],19:["pause","break"],20:["capslock"],27:["escape","esc"],32:["space","spacebar"],33:["pageup"],34:["pagedown"],35:["end"],36:["home"],37:["left"],38:["up"],39:["right"],40:["down"],41:["select"],42:["printscreen"],43:["execute"],44:["snapshot"],45:["insert","ins"],46:["delete","del"],47:["help"],91:["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"],92:["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"],145:["scrolllock","scroll"],186:["semicolon",";"],187:["equal","equalsign","="],188:["comma",","],189:["dash","-"],190:["period","."],191:["slash","forwardslash","/"],192:["graveaccent","`"],219:["openbracket","["],220:["backslash","\\"],221:["closebracket","]"],222:["apostrophe","'"],48:["zero","0"],49:["one","1"],50:["two","2"],51:["three","3"],52:["four","4"],53:["five","5"],54:["six","6"],55:["seven","7"],56:["eight","8"],57:["nine","9"],96:["numzero","num0"],97:["numone","num1"],98:["numtwo","num2"],99:["numthree","num3"],100:["numfour","num4"],101:["numfive","num5"],102:["numsix","num6"],103:["numseven","num7"],104:["numeight","num8"],105:["numnine","num9"],106:["nummultiply","num*"],107:["numadd","num+"],108:["numenter"],109:["numsubtract","num-"],110:["numdecimal","num."],111:["numdevide","num/"],144:["numlock","num"],112:["f1"],113:["f2"],114:["f3"],115:["f4"],116:["f5"],117:["f6"],118:["f7"],119:["f8"],120:["f9"],121:["f10"],122:["f11"],123:["f12"]},macros:[["shift + `",["tilde","~"]],["shift + 1",["exclamation","exclamationpoint","!"]],["shift + 2",["at","@"]],["shift + 3",["number","#"]],["shift + 4",["dollar","dollars","dollarsign","$"]],["shift + 5",["percent","%"]],["shift + 6",["caret","^"]],["shift + 7",["ampersand","and","&"]],["shift + 8",["asterisk","*"]],["shift + 9",["openparen","("]],["shift + 0",["closeparen",")"]],["shift + -",["underscore","_"]],["shift + =",["plus","+"]],["shift + (",["opencurlybrace","opencurlybracket","{"]],["shift + )",["closecurlybrace","closecurlybracket","}"]],["shift + \\",["verticalbar","|"]],["shift + ;",["colon",":"]],["shift + '",["quotationmark",'"']],["shift + !,",["openanglebracket","<"]],["shift + .",["closeanglebracket",">"]],["shift + /",["questionmark","?"]]]},D=65;90>=D;D+=1)E.map[D]=String.fromCharCode(D+32),E.macros.push(["shift + "+String.fromCharCode(D+32)+", capslock + "+String.fromCharCode(D+32),[String.fromCharCode(D)]]);return y("us",E),z("us"),a(),F.enable=a,F.disable=b,F.activeKeys=v,F.on=l,F.clear=m,F.clear.key=n,F.locale=z,F.locale.register=y,F.macro=h,F.macro.remove=i,F.key={},F.key.name=f,F.key.code=g,F.combo={},F.combo.active=r,F.combo.parse=t,F.combo.stringify=u,F})},{}],4:[function(a,b){var c=a("classyjs"),d=a("./helpers.js"),e=c.$extend({__init__:function(a){this.__events={},this._registerWEvents(["destroy"]);for(var b in this)if(0==b.indexOf("get")){var c=b.slice(3,4).toLowerCase()+b.slice(4,b.length);Object.defineProperty(this,c,{get:this[b],enumerable:!0,configurable:!0})}else if(0==b.indexOf("set")){var c=b.slice(3,4).toLowerCase()+b.slice(4,b.length);Object.defineProperty(this,c,{set:this[b],enumerable:!0,configurable:!0})}else if(0==b.indexOf("is")){var c=b.slice(2,3).toLowerCase()+b.slice(3,b.length);Object.defineProperty(this,c,{get:this[b],enumerable:!0,configurable:!0})}var a=a||{};for(param in a)void 0!==this[param]&&(this[param]=a[param]);var e=null,f=0,g="";if(a.callbacks)for(var h in a.callbacks)if(e=a.callbacks[h],"function"==typeof e)this.registerCallback(d.uuid4(),h,e);else if(e instanceof Array)for(f=0;f<e.length;f++)this.registerCallback(d.uuid4(),h,e[f]);else for(g in e)this.registerCallback(g,h,e[g])},__events:null,__callbacks:null,destroy:function(){this._callCallbacks("destroy");for(var a in this.__events)this._unbindEvent(a)},registerCallback:function(a,b,c,d){return this.__callbacks[b]?void(this.__callbacks[b][a]={callback:c,thisArg:d||null}):void console.error("This widget have no '"+b+"' event.")},removeCallback:function(a){for(var b in this.__callbacks)this.__callbacks[b][a]&&delete this.__callbacks[b][a]},_updateProperties:function(a){for(var b=0;b<a.length;b++)this[a[b]]=this[a[b]]},_bindEvent:function(a,b,c,d){this.__events[a]={evName:c,element:b,callback:d},this.__events[a].element.addEventListener(this.__events[a].evName,this.__events[a].callback,!1)},_unbindEvent:function(a){this.__events[a].element.removeEventListener(this.__events[a].evName,this.__events[a].callback,!1),delete this.__events[a]},_registerWEvents:function(a){null==this.__callbacks&&(this.__callbacks={});for(var b in a)this.__callbacks[a[b]]={}},_callCallbacks:function(a,b){var b=b||[];for(var c in this.__callbacks[a])this.__callbacks[a][c].callback.apply(this.__callbacks[a][c].thisArg||this,[this].concat(b))}});b.exports=e},{"./helpers.js":22,classyjs:2}],5:[function(a,b){var c=a("../../lib/stone.js").gettext,d=a("../container/window/dialog.js"),e=a("../container/layout/boxlayout.js"),f=a("../container/layout/gridlayout.js"),g=a("../input/color/color.js"),h=a("../input/color/colorpalette.js"),i=a("../input/color/colorpicker.js"),j=a("../input/button/button.js"),k=a("../input/slider/slider.js"),l=a("../visual/separator.js"),m=a("../visual/label.js"),n=a("../visual/faicon.js"),o=d.$extend({__init__:function(a){this.__widgets={},this._color=new g;var a=a||{};void 0==a.title&&(a.title=c("Select a color...")),this._registerWEvents(["value-changed"]),this.$super(a),this._buildUi(),this._updateProperties(["color"])},_color:null,getColor:function(){return this._color},setColor:function(a){a instanceof g&&(this._color&&this._color.removeCallback("photonui.colorpickerdialog.value-changed::"+this.name),this._color=a,this._color.registerCallback("photonui.colorpickerdialog.value-changed::"+this.name,"value-changed",this.__onColorChanged,this)),this.__onColorChanged()},setVisible:function(a){this.$super(a),this._color&&a&&this.__widgets.labelRed&&this._updateUi()},destroy:function(){this._color.removeCallback("photonui.colorpickerdialog.value-changed::"+this.name),this.$super()},_buildUi:function(){this.__widgets.hbox=new e({orientation:"horizontal"}),this.child=this.__widgets.hbox,this.__widgets.colorPicker=new i,this.__widgets.hbox.addChild(this.__widgets.colorPicker),this.__widgets.colorPalette=new h,this.__widgets.hbox.addChild(this.__widgets.colorPalette),this.__widgets.separator=new l({orientation:"vertical"}),this.__widgets.hbox.addChild(this.__widgets.separator),this.__widgets.grid=new f,this.__widgets.hbox.addChild(this.__widgets.grid),this.__widgets.fieldRed=new k({min:0,max:255,decimalDigits:0}),this.__widgets.labelRed=new m({text:c("Red:"),forInput:this.__widgets.fieldRed}),this.__widgets.grid.addChild(this.__widgets.labelRed,{gridX:0,gridY:0,verticalExpansion:!1}),this.__widgets.grid.addChild(this.__widgets.fieldRed,{gridX:1,gridY:0,verticalExpansion:!1}),this.__widgets.fieldGreen=new k({min:0,max:255,decimalDigits:0}),this.__widgets.labelGreen=new m({text:c("Green:"),forInput:this.__widgets.fieldGreen}),this.__widgets.grid.addChild(this.__widgets.labelGreen,{gridX:0,gridY:1,verticalExpansion:!1}),this.__widgets.grid.addChild(this.__widgets.fieldGreen,{gridX:1,gridY:1,verticalExpansion:!1}),this.__widgets.fieldBlue=new k({min:0,max:255,decimalDigits:0}),this.__widgets.labelBlue=new m({text:c("Blue:"),forInput:this.__widgets.fieldBlue}),this.__widgets.grid.addChild(this.__widgets.labelBlue,{gridX:0,gridY:2,verticalExpansion:!1}),this.__widgets.grid.addChild(this.__widgets.fieldBlue,{gridX:1,gridY:2,verticalExpansion:!1}),this.__widgets.separator2=new l,this.__widgets.grid.addChild(this.__widgets.separator2,{gridX:0,gridY:3,verticalExpansion:!1,gridWidth:2}),this.__widgets.fieldHue=new k({min:0,max:360,decimalDigits:0}),this.__widgets.labelHue=new m({text:c("Hue:"),forInput:this.__widgets.fieldHue}),this.__widgets.grid.addChild(this.__widgets.labelHue,{gridX:0,gridY:4,verticalExpansion:!1}),this.__widgets.grid.addChild(this.__widgets.fieldHue,{gridX:1,gridY:4,verticalExpansion:!1}),this.__widgets.fieldSaturation=new k({min:0,max:100,decimalDigits:0}),this.__widgets.labelSaturation=new m({text:c("Saturation:"),forInput:this.__widgets.fieldSaturation}),this.__widgets.grid.addChild(this.__widgets.labelSaturation,{gridX:0,gridY:5,verticalExpansion:!1}),this.__widgets.grid.addChild(this.__widgets.fieldSaturation,{gridX:1,gridY:5,verticalExpansion:!1}),this.__widgets.fieldBrightness=new k({min:0,max:100,decimalDigits:0}),this.__widgets.labelBrightness=new m({text:c("Brightness:"),forInput:this.__widgets.fieldBrightness}),this.__widgets.grid.addChild(this.__widgets.labelBrightness,{gridX:0,gridY:6,verticalExpansion:!1}),this.__widgets.grid.addChild(this.__widgets.fieldBrightness,{gridX:1,gridY:6,verticalExpansion:!1}),this.__widgets.buttonOk=new j({text:c("Ok")}),n&&(this.__widgets.buttonOk.leftIcon=new n("fa-check")),this.__widgets.buttonCancel=new j({text:c("Cancel")}),this.buttons=[this.__widgets.buttonOk,this.__widgets.buttonCancel],n&&(this.__widgets.buttonCancel.leftIcon=new n("fa-times")),this.__widgets.colorPalette.color=this.__widgets.colorPicker.color,this.__widgets.colorPicker.color.registerCallback("colorpickerdialog.colorPicker.value-changed","value-changed",this._updateUi,this),this.__widgets.fieldRed.registerCallback("colorpickerdialog.fieldRed.value-changed","value-changed",function(a,b){this.__widgets.colorPicker.color.red=b},this),this.__widgets.fieldGreen.registerCallback("colorpickerdialog.fieldGreen.value-changed","value-changed",function(a,b){this.__widgets.colorPicker.color.green=b},this),this.__widgets.fieldBlue.registerCallback("colorpickerdialog.fieldBlue.value-changed","value-changed",function(a,b){this.__widgets.colorPicker.color.blue=b},this),this.__widgets.fieldHue.registerCallback("colorpickerdialog.fieldHue.value-changed","value-changed",function(a,b){this.__widgets.colorPicker.color.hue=b},this),this.__widgets.fieldSaturation.registerCallback("colorpickerdialog.fieldSaturation.value-changed","value-changed",function(a,b){this.__widgets.colorPicker.color.saturation=b},this),this.__widgets.fieldBrightness.registerCallback("colorpickerdialog.fieldBrightness.value-changed","value-changed",function(a,b){this.__widgets.colorPicker.color.brightness=b},this),this.__widgets.buttonOk.registerCallback("colorpickerdialog.buttonOk.click","click",this.__onValidate,this),this.__widgets.buttonCancel.registerCallback("colorpickerdialog.buttonCancel.click","click",this.__onCancel,this),this.registerCallback("colorpickerdialog.close","close-button-clicked",this.__onCancel,this)},_updateUi:function(a){var a=a||this.color;this.__widgets.fieldRed.value=a.red,this.__widgets.fieldGreen.value=a.green,this.__widgets.fieldBlue.value=a.blue,this.__widgets.fieldHue.value=a.hue,this.__widgets.fieldSaturation.value=a.saturation,this.__widgets.fieldBrightness.value=a.brightness},__onCancel:function(){this.__widgets.colorPicker.color.setHSB(this._color.hue,this._color.saturation,this._color.brightness),this.hide()},__onValidate:function(){this._color.setHSB(this.__widgets.colorPicker.color.hue,this.__widgets.colorPicker.color.saturation,this.__widgets.colorPicker.color.brightness),this.hide(),this._callCallbacks("value-changed",[this.color])},__onColorChanged:function(){this.__widgets.colorPicker.color.setHSB(this._color.hue,this._color.saturation,this._color.brightness)}});b.exports=o},{"../../lib/stone.js":1,"../container/layout/boxlayout.js":8,"../container/layout/gridlayout.js":10,"../container/window/dialog.js":17,"../input/button/button.js":23,"../input/color/color.js":28,"../input/color/colorpalette.js":29,"../input/color/colorpicker.js":30,"../input/slider/slider.js":37,"../visual/faicon.js":43,"../visual/label.js":44,"../visual/separator.js":46}],6:[function(a,b){var c=a("../container/window/popupwindow.js"),d=a("../container/menu/menu.js"),e=c.$extend({__init__:function(a){this._childrenNames=[],this.$super(a)},__include__:[{getChildrenNames:d.prototype.getChildrenNames,setChildrenNames:d.prototype.setChildrenNames,getChildren:d.prototype.getChildren,setChildren:d.prototype.setChildren,getChildName:d.prototype.getChildName,setChildName:d.prototype.setChildName,getChild:d.prototype.getChild,setChild:d.prototype.setChild,isIconVisible:d.prototype.isIconVisible,setIconVisible:d.prototype.setIconVisible,addChild:d.prototype.addChild,removeChild:d.prototype.removeChild,destroy:d.prototype.destroy,_updateLayout:d.prototype._updateLayout}],_buildHtml:function(){this.$super(),d.prototype._buildHtml.call(this),this.__html.inner.appendChild(this.__html.outer),this.__html.window.className+=" photonui-popupmenu",this.__html.outer.className="photonui-widget photonui-menu photonui-menu-style-popupmenu"},__onLocaleChanged:function(){}});b.exports=e},{"../container/menu/menu.js":12,"../container/window/popupwindow.js":18}],7:[function(a,b){var c=a("../widget.js");Container=c.$extend({_childName:null,getChildName:function(){return this._childName},setChildName:function(a){this.childName&&this.containerNode&&this.child&&this.child.html&&this.containerNode.removeChild(this.child.html),this._childName=a,this.childName&&this.containerNode&&this.child&&this.child.html&&this.containerNode.appendChild(this.child.html)},getChild:function(){return c.getWidget(this.childName)},setChild:function(a){return!a instanceof c?void(this.childName=null):void(this.childName=a.name)},getContainerNode:function(){return console.warn("getContainerNode() method not implemented for this widget."),null},destroy:function(){this.childName&&this.child.destroy(),this.$super()}}),b.exports=Container},{"../widget.js":50}],8:[function(a,b){var c=a("../../helpers.js"),d=a("./gridlayout.js"),e=d.$extend({__init__:function(a){this.$super(a),this._updateProperties(["orientation"])},_orientation:"vertical",getOrientation:function(){return this._orientation},setOrientation:function(a){if("vertical"!=a&&"horizontal"!=a)throw'Error: The orientation should be "vertical" or "horizontal".';this._orientation=a,this.removeClass("photonui-layout-orientation-vertical"),this.removeClass("photonui-layout-orientation-horizontal"),this.addClass("photonui-layout-orientation-"+this.orientation),this._updateLayout()},_buildHtml:function(){this.$super(),this.__html.outerbox.className="photonui-widget photonui-boxlayout"},_updateLayout:function(){c.cleanNode(this.__html.gridBody);var a=null;"horizontal"==this.getOrientation()&&(a=document.createElement("tr"),this.__html.gridBody.appendChild(a));for(var b=this.children,d=0;d<b.length;d++){"vertical"==this.getOrientation()&&(a=document.createElement("tr"),this.__html.gridBody.appendChild(a));var e=document.createElement("td");e.className="photonui-container photonui-boxlayout-cell",a.appendChild(e),(void 0==b[d].layoutOptions.horizontalExpansion||b[d].layoutOptions.horizontalExpansion)&&(e.className+=" photonui-container-expand-child-horizontal"),(void 0==b[d].layoutOptions.verticalExpansion||b[d].layoutOptions.verticalExpansion)&&(e.className+=" photonui-container-expand-child-vertical"),void 0!=b[d].layoutOptions.width&&(e.style.height=b[d].layoutOptions.width+"px"),void 0!=b[d].layoutOptions.height&&(e.style.height=b[d].layoutOptions.height+"px"),void 0!=b[d].layoutOptions.minWidth&&(e.style.minWidth=this.childrenWidgets[d].layoutOptions.minWidth+"px"),void 0!=b[d].layoutOptions.minHeight&&(e.style.minHeight=this.childrenWidgets[d].layoutOptions.minHeight+"px"),void 0!=b[d].layoutOptions.maxWidth&&(e.style.maxWidth=this.childrenWidgets[d].layoutOptions.maxWidth+"px"),void 0!=b[d].layoutOptions.maxHeight&&(e.style.maxHeight=this.childrenWidgets[d].layoutOptions.maxHeight+"px"),void 0!=b[d].layoutOptions.horizontalAlign&&(e.style.textAlign=this.childrenWidgets[d].layoutOptions.horizontalAlign,console.log("hhhh")),e.appendChild(b[d].html)}}});b.exports=e},{"../../helpers.js":22,"./gridlayout.js":10}],9:[function(a,b){var c=a("../../helpers.js"),d=a("./layout.js"),e=d.$extend({_verticalSpacing:0,getVerticalSpacing:function(){return this._verticalSpacing},setVerticalSpacing:function(a){this._verticalSpacing=a,this._updateLayout()},_horizontalSpacing:2,getHorizontalSpacing:function(){return this._horizontalSpacing},setHorizontalSpacing:function(a){this._horizontalSpacing=a,this._updateLayout()},getHtml:function(){return this.__html.outerbox},_buildHtml:function(){this.__html.outerbox=document.createElement("div"),this.__html.outerbox.className="photonui-widget photonui-fluidlayout"},_updateLayout:function(){for(var a=this.children,b=document.createDocumentFragment(),d=null,e=0;e<a.length;e++)d=document.createElement("div"),d.className="photonui-container",d.style.padding="0 "+this.horizontalSpacing+"px "+this.verticalSpacing+"px 0",d.appendChild(a[e].html),b.appendChild(d);c.cleanNode(this.__html.outerbox),this.__html.outerbox.appendChild(b)}});b.exports=e},{"../../helpers.js":22,"./layout.js":11}],10:[function(a,b){var c=a("../../helpers.js"),d=a("./layout.js"),e=d.$extend({__init__:function(a){this.$super(a),this._updateProperties(["verticalSpacing"])},_verticalSpacing:5,getVerticalSpacing:function(){return this._verticalSpacing},setVerticalSpacing:function(a){this._verticalSpacing=a,this.__html.grid.style.borderSpacing=this.verticalSpacing+"px "+this.horizontalSpacing+"px"},_horizontalSpacing:5,getHorizontalSpacing:function(){return this._horizontalSpacing},setHorizontalSpacing:function(a){this._horizontalSpacing=a,this.__html.grid.style.borderSpacing=this.verticalSpacing+"px "+this.horizontalSpacing+"px"},getHtml:function(){return this.__html.outerbox},_buildHtml:function(){this.__html.outerbox=document.createElement("div"),this.__html.outerbox.className="photonui-widget photonui-gridlayout",this.__html.grid=document.createElement("table"),this.__html.outerbox.appendChild(this.__html.grid),this.__html.gridBody=document.createElement("tbody"),this.__html.grid.appendChild(this.__html.gridBody)},_updateLayout:function(){for(var a=1/0,b=1/0,d=0,e=0,f=this.children,g=0;g<f.length;g++)f[g].layoutOptions.gridX=void 0!=f[g].layoutOptions.gridX?f[g].layoutOptions.gridX:0,f[g].layoutOptions.gridY=void 0!=f[g].layoutOptions.gridY?f[g].layoutOptions.gridY:0,f[g].layoutOptions.gridWidth=Math.max(f[g].layoutOptions.gridWidth,1)||1,f[g].layoutOptions.gridHeight=Math.max(f[g].layoutOptions.gridHeight,1)||1,a=Math.min(a,f[g].layoutOptions.gridX),b=Math.min(b,f[g].layoutOptions.gridY),d=Math.max(d,f[g].layoutOptions.gridX+f[g].layoutOptions.gridWidth),e=Math.max(e,f[g].layoutOptions.gridY+f[g].layoutOptions.gridHeight);d-=a,e-=b,c.cleanNode(this.__html.gridBody);for(var h=[],i=0;e>i;i++){for(var j=[],k=0;d>k;k++)j.push(!1);h.push(j)}for(var i=0;e>i;i++){var l=document.createElement("tr");this.__html.gridBody.appendChild(l);for(var k=0;d>k;k++)if(!h[i][k]){var m=!1,n=document.createElement("td");n.className="photonui-container photonui-gridlayout-cell",l.appendChild(n);for(var g=0;g<f.length;g++)if(f[g].layoutOptions.gridX-a==k&&f[g].layoutOptions.gridY-b==i){m=!0;var o=f[g].layoutOptions.gridWidth,p=f[g].layoutOptions.gridHeight;if(n.colSpan=o,n.rowSpan=p,n.appendChild(f[g].html),(void 0==f[g].layoutOptions.horizontalExpansion||f[g].layoutOptions.horizontalExpansion)&&(n.className+=" photonui-container-expand-child-horizontal"),(void 0==f[g].layoutOptions.verticalExpansion||f[g].layoutOptions.verticalExpansion)&&(n.className+=" photonui-container-expand-child-vertical"),void 0!=f[g].layoutOptions.width&&(n.style.height=f[g].layoutOptions.width+"px"),void 0!=f[g].layoutOptions.height&&(n.style.height=f[g].layoutOptions.height+"px"),void 0!=f[g].layoutOptions.minWidth&&(n.style.minWidth=f[g].layoutOptions.minWidth+"px"),
void 0!=f[g].layoutOptions.minHeight&&(n.style.minHeight=f[g].layoutOptions.minHeight+"px"),void 0!=f[g].layoutOptions.maxWidth&&(n.style.maxWidth=f[g].layoutOptions.maxWidth+"px"),void 0!=f[g].layoutOptions.maxHeight&&(n.style.maxHeight=f[g].layoutOptions.maxHeight+"px"),void 0!=f[g].layoutOptions.horizontalAlign&&(n.style.textAlign=f[g].layoutOptions.horizontalAlign),o>1||p>1)for(var q=i;i+p>q;q++)for(var r=k;k+o>r;r++)h[q][r]=!0;break}m||(n.innerHTML="&nbsp;")}}}});b.exports=e},{"../../helpers.js":22,"./layout.js":11}],11:[function(a,b){var c=a("../container.js"),d=a("../../widget.js"),e=c.$extend({__init__:function(a){this._childrenNames=[],this.$super(a)},_childrenNames:[],getChildrenNames:function(){return this._childrenNames},setChildrenNames:function(a){this._childrenNames=a,this._updateLayout()},getChildren:function(){for(var a=[],b=0;b<this._childrenNames.length;b++)a.push(d.getWidget(this._childrenNames[b]));return a},setChildren:function(a){for(var b=[],c=0;c<a.length;c++)a[c]instanceof d&&b.push(a[c].name);this.childrenNames=b},getChildName:function(){return console.warn("Warning: You cannot use getChild() on layout widgets, please use getChildren() instead."),null},setChildName:function(a){this.childrenNames=[a]},getChild:function(){return console.warn("Warning: You cannot use getChild() on layout widgets, please use getChildren() instead."),null},setChild:function(a){this.children=[a]},addChild:function(a,b){b&&(a.layoutOptions=b),this._childrenNames.push(a.name),this._updateLayout()},removeChild:function(a){var b=this._childrenNames.indexOf(a.name);b>=0&&this._childrenNames.splice(b,1),this._updateLayout()},empty:function(){for(var a=this.children,b=0;b<a.length;b++)a[b].destroy();this.children=[]},destroy:function(){for(var a=this.children,b=0;b<a.length;b++)a[b].destroy();this.$super()},_updateLayout:function(){throw"Error: you should define the _updateLayout() method when you extend a layout widget."},__onLocaleChanged:function(){}});b.exports=e},{"../../widget.js":50,"../container.js":7}],12:[function(a,b){var c=a("../../helpers.js"),d=a("../layout/layout.js"),e=d.$extend({__init__:function(a){this.$super(a),this._updateProperties(["iconVisible"])},_iconVisible:!0,isIconVisible:function(){return this._iconVisible},setIconVisible:function(a){this._iconVisible=a,a?this.removeClass("photonui-menu-noicon"):this.addClass("photonui-menu-noicon")},getHtml:function(){return this.__html.outer},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-menu photonui-menu-style-default"},_updateLayout:function(){c.cleanNode(this.__html.outer);for(var a=this.children,b=0;b<a.length;b++)this.__html.outer.appendChild(a[b].html)}});b.exports=e},{"../../helpers.js":22,"../layout/layout.js":11}],13:[function(a,b){var c=a("../../helpers.js"),d=a("../../widget.js"),e=a("../container.js"),f=a("../../visual/baseicon.js"),g=e.$extend({__init__:function(a){this._registerWEvents(["click"]),this.$super(a),this._updateProperties(["text","icon","active"]),this._bindEvent("click",this.__html.outer,"click",function(a){this._callCallbacks("click",[a])}.bind(this))},_value:"",getValue:function(){return this._value},setValue:function(a){this._value=a},_text:"Menu Item",getText:function(){return this._text},setText:function(a){this._text=a,c.cleanNode(this.__html.text),this.__html.text.appendChild(document.createTextNode(a))},_iconName:null,getIconName:function(){return this._iconName},setIconName:function(a){this._iconName=a,c.cleanNode(this.__html.icon),this._iconName&&this.__html.icon.appendChild(this.icon.html)},getIcon:function(){return d.getWidget(this._iconName)},setIcon:function(a){return a instanceof f?void(this.iconName=a.name):void(this.iconName=null)},_active:!1,getActive:function(){return this._active},setActive:function(a){this._active=a,a?this.addClass("photonui-menuitem-active"):this.removeClass("photonui-menuitem-active")},getHtml:function(){return this.__html.outer},getContainerNode:function(){return this.__html.widget},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-menuitem",this.__html.icon=document.createElement("span"),this.__html.icon.className="photonui-menuitem-icon",this.__html.outer.appendChild(this.__html.icon),this.__html.text=document.createElement("span"),this.__html.text.className="photonui-menuitem-text",this.__html.outer.appendChild(this.__html.text),this.__html.widget=document.createElement("span"),this.__html.widget.className="photonui-menuitem-widget",this.__html.outer.appendChild(this.__html.widget)}});b.exports=g},{"../../helpers.js":22,"../../visual/baseicon.js":41,"../../widget.js":50,"../container.js":7}],14:[function(a,b){var c=a("../../widget.js"),d=a("./menuitem.js"),e=a("./menu.js"),f=d.$extend({__init__:function(a){this.$super(a),this.addClass("photonui-submenuitem"),this.registerCallback("toggle-folding","click",this.__onItemClicked,this),this._updateProperties(["menuName"])},_menuName:null,getMenuName:function(){return this._menuName},setMenuName:function(a){this.menuName&&(this.menu.removeCallback("fold"),this.menu.removeCallback("unfold")),this._menuName=a,this.menuName&&(this.menu.registerCallback("fold","hide",this.__onToggleFold,this),this.menu.registerCallback("unfold","show",this.__onToggleFold,this),this.active=this.menu.visible)},getMenu:function(){return c.getWidget(this.menuName)},setMenu:function(a){this.menuName=a instanceof e?a.name:null},__onToggleFold:function(a){this.active=a.visible},__onItemClicked:function(){this.menu.visible=!this.menu.visible}});b.exports=f},{"../../widget.js":50,"./menu.js":12,"./menuitem.js":13}],15:[function(a,b){var c=a("../container.js"),d=c.$extend({__init__:function(a){this.$super(a),this._updateProperties(["padding","verticalScrollbar","horizontalScrollbar"])},_padding:0,getPadding:function(){return this._padding},setPadding:function(a){this._padding=a,this.containerNode.style.padding=a+"px"},_verticalScrollbar:null,getVerticalScrollbar:function(){return this._verticalScrollbar},setVerticalScrollbar:function(a){this._verticalScrollbar=a,this.__html.viewport.style.overflowY=a===!0?"scroll":a===!1?"hidden":"auto"},_horizontalScrollbar:null,getHorizontalScrollbar:function(){return this._horizontalScrollbar},setHorizontalScrollbar:function(a){this._horizontalScrollbar=a,this.__html.viewport.style.overflowX=a===!0?"scroll":a===!1?"hidden":"auto"},getHtml:function(){return this.__html.viewport},getContainerNode:function(){return this.html},_buildHtml:function(){this.__html.viewport=document.createElement("div"),this.__html.viewport.className="photonui-widget photonui-viewport photonui-container"},__onLocaleChanged:function(){}});b.exports=d},{"../container.js":7}],16:[function(a,b){var c=a("../container.js"),d=a("../../widget.js"),e=c.$extend({__init__:function(a){this._registerWEvents(["position-changed"]),this.$super(a);var a=a||{};void 0===a.visible&&(this.visible=!1),d.domInsert(this),this._updateProperties(["position","width","height","minWidth","minHeight","maxWidth","maxHeight","padding"])},getPosition:function(){return this.visible&&this.html.parentNode?this.absolutePosition:{x:this._x,y:this._y}},setPosition:function(a,b){"object"==typeof a&&void 0==b?(this.html.style.left=a.x+"px",this.html.style.top=a.y+"px",this._x=a.x,this._y=a.y):("number"==typeof a&&(this.html.style.left=a+"px",this._x=a),"number"==typeof b&&(this.html.style.top=b+"px",this._y=b)),this._callCallbacks("position-changed",[this.x,this.y])},_x:0,getX:function(){return this.position.x},setX:function(a){this.setPosition(a,null)},_y:0,getY:function(){return this.position.y},setY:function(a){this.setPosition(null,a)},_width:null,getWidth:function(){return this.visible&&this.html.parenNode?this.containerNode.offsetWidth:this._width||0},setWidth:function(a){this._width=a||null,this.containerNode.style.width=this._width?a+"px":"auto"},_height:null,getHeight:function(){return this.visible&&this.html.parenNode?this.containerNode.offsetHeight:this._height||0},setHeight:function(a){this._height=a||null,this.containerNode.style.height=this._height?a+"px":"auto"},_minWidth:null,getMinWidth:function(){return this._minWidth},setMinWidth:function(a){this._minWidth=a||null,this.containerNode.style.minWidth=this._minWidth?a+"px":"0"},_minHeight:null,getMinHeight:function(){return this._minHeight},setMinHeight:function(a){this._minHeight=a||null,this.containerNode.style.minHeight=this._minHeight?a+"px":"0"},_maxWidth:null,getMaxWidth:function(){return this._maxWidth},setMaxWidth:function(a){this._maxWidth=a||null,this.containerNode.style.maxWidth=this._maxWidth?a+"px":"auto"},_maxHeight:null,getMaxHeight:function(){return this._maxHeight},setMaxHeight:function(a){this._maxHeight=a||null,this.containerNode.style.maxHeight=this._maxHeight?a+"px":"auto"},_padding:0,getPadding:function(){return this._padding},setPadding:function(a){this._padding=a,this.containerNode.style.padding=a+"px"},getHtml:function(){return this.__html.window},getContainerNode:function(){return this.html},center:function(){var a=d.e_parent||document.getElementsByTagName("body")[0];a&&this.setPosition(Math.round((a.offsetWidth-this.offsetWidth)/2),Math.round((a.offsetHeight-this.offsetHeight)/2))},_buildHtml:function(){this.__html.window=document.createElement("div"),this.__html.window.className="photonui-widget photonui-basewindow"}});b.exports=e},{"../../widget.js":50,"../container.js":7}],17:[function(a,b){var c=a("../../helpers.js"),d=a("../../widget.js"),e=a("./window.js"),f=e.$extend({__init__:function(a){this._buttonsNames=[],this.$super(a)},_buttonsNames:[],getButtonsNames:function(){return this._buttonsNames},setButtonsNames:function(a){this._buttonsNames=a,this._updateButtons()},getButtons:function(){for(var a=[],b=0;b<this._buttonsNames.length;b++)a.push(d.getWidget(this._buttonsNames[b]));return a},setButtons:function(a){for(var b=[],c=0;c<a.length;c++)a[c]instanceof d&&b.push(a[c].name);this.buttonsNames=b},addButton:function(a){this._childrenNames.push(a.name),this._updateButtons()},removeButton:function(a){var b=this._buttonsNames.indexOf(a.name);b>=0&&this._buttonsNames.splice(a.name,1),this._updateButtons()},_updateButtons:function(){c.cleanNode(this.__html.buttons);for(var a=this.buttons,b=a.length-1;b>=0;b--)this.__html.buttons.appendChild(a[b].html)},_buildHtml:function(){this.$super(),this.addClass("photonui-dialog"),this.__html.buttons=document.createElement("div"),this.__html.buttons.className="photonui-dialog-buttons",this.__html.window.appendChild(this.__html.buttons)}});b.exports=f},{"../../helpers.js":22,"../../widget.js":50,"./window.js":19}],18:[function(a,b){var c=a("./basewindow.js"),d=c.$extend({__init__:function(a){this.$super(a),this._bindEvent("document-mousedown-close",document,"mousedown",this.hide.bind(this)),this._bindEvent("popup-click-close",this.html,"click",this.hide.bind(this)),this._bindEvent("mousedown-preventclose",this.html,"mousedown",function(a){a.stopPropagation()}.bind(this))},getContainerNode:function(){return this.__html.inner},popupXY:function(a,b){this.setPosition(-1337,-1337),this.show();var c=document.getElementsByTagName("body")[0].offsetWidth,d=document.getElementsByTagName("body")[0].offsetHeight,e=this.offsetWidth,f=this.offsetHeight;a+e>c&&(a=c-e),b+f>d&&(b-=f),0>a&&(a=0),0>b&&(b=0),this.setPosition(a,b)},popupWidget:function(a){this.setPosition(-1337,-1337),this.show();var b=document.getElementsByTagName("body")[0],c=0,d=0,e=a.absolutePosition,f=a.offsetHeight,g=a.offsetWidth,h=this.offsetWidth,i=this.offsetHeight;c=e.x+h<b.offsetWidth?e.x:e.x+g<b.offsetWidth?e.x+g-h:b.offsetWidth-h,e.y+f+i<b.offsetHeight?d=e.y+f+1:e.y-i>=0&&(d=e.y-i-1),0>c&&(c=0),0>d&&(d=0),this.setPosition(c,d)},_buildHtml:function(){this.$super(),this.__html.window.className+=" photonui-popupwindow",this.__html.inner=document.createElement("div"),this.__html.window.appendChild(this.__html.inner)}});b.exports=d},{"./basewindow.js":16}],19:[function(a,b){var c=a("../../../lib/stone.js"),d=a("../../helpers.js"),e=a("./basewindow.js"),f=[],g=e.$extend({__init__:function(a){this._registerWEvents(["close-button-clicked"]),this.$super(a),this._bindEvent("move.dragstart",this.__html.windowTitle,"mousedown",this.__moveDragStart.bind(this)),this._bindEvent("closeButton.click",this.__html.windowTitleCloseButton,"click",this.__closeButtonClicked.bind(this)),this._bindEvent("totop",this.__html.window,"mousedown",this.moveToFront.bind(this)),this._bindEvent("closeButton.mousedown",this.__html.windowTitleCloseButton,"mousedown",function(a){a.stopPropagation()}),this._updateProperties(["title","closeButtonVisible"]),this.moveToFront()},_title:"Window",getTitle:function(){return this._title},setTitle:function(a){this._title=a,d.cleanNode(this.__html.windowTitleText),this.__html.windowTitleText.appendChild(document.createTextNode(a))},_movable:!0,isMovable:function(){return this._movable},setMovable:function(a){this._movable=a},_closeButtonVisible:!0,getCloseButtonVisible:function(){return this._closeButtonVisible},setCloseButtonVisible:function(a){this._closeButtonVisible=a,a?(this.addClass("photonui-window-have-button"),this.__html.windowTitleCloseButton.style.display="block"):(this.removeClass("photonui-window-have-button"),this.__html.windowTitleCloseButton.style.display="none")},_modal:!1,isModal:function(){return this._modal},setModal:function(a){if(this._modal=a,a){this.__html.modalBox=document.createElement("div"),this.__html.modalBox.className="photonui-window-modalbox";var b=photonui.e_parent||document.getElementsByTagName("body")[0];b.appendChild(this.__html.modalBox),this.visible=this.visible}else this.__html.modalBox&&(this.__html.modalBox.parentNode.removeChild(this.__html.modalBox),delete this.__html.modalBox)},getContainerNode:function(){return this.__html.windowContent},setVisible:function(a){this.$super(a),this.visible?(this.moveToFront(),this.modal&&(this.__html.modalBox.style.display="block")):(this.moveToBack(),this.modal&&(this.__html.modalBox.style.display="none"))},moveToFront:function(){var a=f.indexOf(this);a>=0&&f.splice(a,1),f.unshift(this),this._updateWindowList()},moveToBack:function(){var a=f.indexOf(this);a>=0&&f.splice(a,1),f.push(this),this._updateWindowList()},destroy:function(){this.modal=!1;var a=f.indexOf(this);a>=0&&f.splice(a,1),this.$super()},_buildHtml:function(){c.lazyGettext;this.$super(),this.__html.window.className+=" photonui-window",this.__html.windowTitle=document.createElement("div"),this.__html.windowTitle.className="photonui-window-title",this.__html.window.appendChild(this.__html.windowTitle),this.__html.windowTitleCloseButton=document.createElement("button"),this.__html.windowTitleCloseButton.className="photonui-window-title-close-button fa fa-times",this.__html.windowTitleCloseButton.title=c.lazyGettext("Close"),this.__html.windowTitle.appendChild(this.__html.windowTitleCloseButton),this.__html.windowTitleText=document.createElement("span"),this.__html.windowTitleText.className="photonui-window-title-text",this.__html.windowTitle.appendChild(this.__html.windowTitleText),this.__html.windowContent=document.createElement("div"),this.__html.windowContent.className="photonui-container photonui-window-content photonui-container-expand-child",this.__html.window.appendChild(this.__html.windowContent)},_updateWindowList:function(){for(var a=f.length-1,b=0;a>=0;a--,b++)0==a?(f[a].html.style.zIndex=2001,f[a].addClass("photonui-active")):(f[a].html.style.zIndex=1e3+b,f[a].removeClass("photonui-active")),f[a].modal&&(f[a].html.style.zIndex=3001)},__moveDragStart:function(a){if(this.movable&&!(a.button>0)){var b=void 0!=a.offsetX?a.offsetX:a.layerX,c=void 0!=a.offsetY?a.offsetY:a.layerY;this.__html.windowTitle.style.cursor="move",this._bindEvent("move.dragging",document,"mousemove",this.__moveDragging.bind(this,b,c)),this._bindEvent("move.dragend",document,"mouseup",this.__moveDragEnd.bind(this))}},__moveDragging:function(a,b,c){var d=document.getElementsByTagName("body")[0],e=Math.min(Math.max(c.pageX-a,40-this.offsetWidth),d.offsetWidth-40),f=Math.max(c.pageY-b,0);d.offsetHeight>0&&(f=Math.min(f,d.offsetHeight-this.__html.windowTitle.offsetHeight)),this.setPosition(e,f)},__moveDragEnd:function(){this.__html.windowTitle.style.cursor="default",this._unbindEvent("move.dragging"),this._unbindEvent("move.dragend")},__closeButtonClicked:function(){this._callCallbacks("close-button-clicked")},__onLocaleChanged:function(){this.$super(),this.__html.windowTitleCloseButton.title=c.lazyGettext("Close")}});b.exports=g},{"../../../lib/stone.js":1,"../../helpers.js":22,"./basewindow.js":16}],20:[function(a,b){var c=a("../base.js"),d=a("keyboardjs"),e=c.$extend({__init__:function(){this.__kbd={},this.$super()},__kbd:null,addAccel:function(a,b,c,e){var b=b.toLowerCase().replace(/ *\+ */," + ").replace(/ *, */,", ").replace(/ *> */," > ");this.removeAccel(a),this.__kbd[a]={keys:b,safe:void 0===e?!0:e,callback:c,binding:d.on(b,this.__onAccell.bind(this))}},removeAccel:function(a){this.__kbd[a]&&(this.__kbd[a].binding.clear(),delete this.__kbd[a])},destroy:function(){for(var a in this.__kbd)this.removeAccel(a);this.$super()},__onAccell:function(a,b,c){for(var d in this.__kbd)this.__kbd[d].keys==c&&(this.__kbd[d].safe&&(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLSelectElement||document.activeElement instanceof HTMLTextAreaElement)||(this.__kbd[d].callback(),a.stopPropagation(),a.preventDefault()))}});b.exports=e},{"../base.js":4,keyboardjs:3}],21:[function(a,b){var c=a("../helpers.js"),d=a("../base.js"),e=a("../widget.js"),f=d.$extend({__init__:function(a){this._registerWEvents(["mouse-event","mouse-down","mouse-up","click","double-click","drag-start","dragging","drag-end","mouse-move","scroll-up","scroll-down"]),this.$super(),this.element=a},_element:null,getElement:function(){return this._element||document},setElement:function(a){this._element=a instanceof e?a.interactiveNode||a.html:a instanceof HTMLElement?a:null,this._updateEvents()},_threshold:5,getThreshold:function(){return this._threshold},setThreshold:function(a){this._threshold=a},getPageX:function(){return this.__event.pageX||0},getPageY:function(){return this.__event.pageY||0},getX:function(){var a=c.getAbsolutePosition(this.element).x;return this.pageX-a},getY:function(){var a=c.getAbsolutePosition(this.element).y;return this.pageY-a},getDeltaX:function(){return this.pageX-(void 0!==this.__prevState.pageX?this.__prevState.pageX:this.pageX)},getDeltaY:function(){return this.pageY-(void 0!==this.__prevState.pageY?this.__prevState.pageY:this.pageY)},_action:"",getAction:function(){return this._action},_btnLeft:!1,getBtnLeft:function(){return this._btnLeft},_btnMiddle:!1,getBtnMiddle:function(){return this._btnMiddle},_btnRight:!1,getBtnRight:function(){return this._btnRight},_button:null,getButton:function(){return this._button},__prevState:{},__mouseDownEvent:{},__event:{},_updateEvents:function(){for(var a in this.__events)this._unbindEvent(a);this.element&&(this._bindEvent("mouse-down",this.element,"mousedown",this.__onMouseDown.bind(this)),this._bindEvent("mouse-up",this.element,"mouseup",this.__onMouseUp.bind(this)),this._bindEvent("double-click",this.element,"dblclick",this.__onDoubleClick.bind(this)),this._bindEvent("mouse-move",this.element,"mousemove",this.__onMouseMove.bind(this)),this._bindEvent("mousewheel",this.element,"mousewheel",this.__onMouseWheel.bind(this)),this._bindEvent("mousewheel-firefox",this.element,"DOMMouseScroll",this.__onMouseWheel.bind(this)),this._bindEvent("document-mouse-up",document,"mouseup",this.__onDocumentMouseUp.bind(this)),this._bindEvent("document-mouse-move",document,"mousemove",this.__onDocumentMouseMove.bind(this)))},_dump:function(){return{event:this.__event,action:this.action,pageX:this.pageX,pageY:this.pageY,x:this.x,y:this.y,deltaX:this.deltaX,deltaY:this.deltaY,btnLeft:this.btnLeft,btnMiddle:this.btnMiddle,btnRight:this.btnRight,button:this.button}},_stateMachine:function(a,b){this.__prevState=this._dump(),this._action=a,this.__event=b,this._button=null,0===b.button&&(this._button="left"),1===b.button&&(this._button="middle"),2===b.button&&(this._button="right"),"mouse-down"==a?(this.__mouseDownEvent=b,0===b.button&&(this._btnLeft=!0),1===b.button&&(this._btnMiddle=!0),2===b.button&&(this._btnRight=!0),this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()])):"mouse-up"==a?(0===b.button&&(this._btnLeft=!1),1===b.button&&(this._btnMiddle=!1),2===b.button&&(this._btnRight=!1),this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()])):"drag-end"==a&&(0===b.button&&(this._btnLeft=!1),1===b.button&&(this._btnMiddle=!1),2===b.button&&(this._btnRight=!1)),"mouse-up"==a&&Math.abs(this.pageX-this.__mouseDownEvent.pageX)<=this._threshold&&Math.abs(this.pageY-this.__mouseDownEvent.pageY)<=this._threshold&&(this._action="click",this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks("click",[this._dump()])),"double-click"==a&&"click"==this.__prevState.action&&(this._action="double-click",this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()])),"mouse-move"==a&&(this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()])),"mouse-move"==a&&"drag-start"!=this.__prevState.action&&"dragging"!=this.__prevState.action&&(this.btnLeft||this.btnMiddle||this.btnRight)?(Math.abs(this.pageX-this.__mouseDownEvent.pageX)>this._threshold||Math.abs(this.pageY-this.__mouseDownEvent.pageY)>this._threshold)&&(this._action="drag-start",this.__event=this.__mouseDownEvent,this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()]),this._action="dragging",this.__prevState.event=this.__mouseDownEvent,this.__event=b,this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()])):"dragging"==a||"mouse-move"==a&&("drag-start"==this.__prevState.action||"dragging"==this.__prevState.action)&&(this.btnLeft||this.btnMiddle||this.btnRight)?(this._action="dragging",this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()])):"drag-end"!=a&&("mouse-up"!=a||"dragging"!=this.__prevState.action&&"drag-start"!=this.__prevState.action||this.btnLeft||this.btnMiddle||this.btnRight)||(this._action="drag-end",this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()])),("scroll-up"==a||"scroll-down"==a)&&(this._callCallbacks("mouse-event",[this._dump()]),this._callCallbacks(this.action,[this._dump()]))},__onMouseDown:function(a){this._stateMachine("mouse-down",a)},__onMouseUp:function(a){this._stateMachine("mouse-up",a)},__onDoubleClick:function(a){this._stateMachine("double-click",a)},__onMouseMove:function(a){this._stateMachine("mouse-move",a)},__onDocumentMouseUp:function(a){("dragging"==this.action||"drag-start"==this.action)&&this._stateMachine("drag-end",a)},__onDocumentMouseMove:function(a){("dragging"==this.action||"drag-start"==this.action)&&this._stateMachine("dragging",a)},__onMouseWheel:function(a){var b=null;void 0!=a.wheelDeltaY&&(b=a.wheelDeltaY),void 0!=a.wheelDelta&&(b=a.wheelDelta),void 0!=a.axis&&void 0!=a.detail&&2==a.axis&&(b=-a.detail),null!=b&&(b>=0?this._stateMachine("scroll-up",a):this._stateMachine("scroll-down",a))}});b.exports=f},{"../base.js":4,"../helpers.js":22,"../widget.js":50}],22:[function(a,b){var c=(a("./photonui.js"),function(){});c.escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},c.uuid4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},c.cleanNode=function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)},c.getAbsolutePosition=function(a){if(!a instanceof Element)return{x:0,y:0};try{var b=getComputedStyle(a)}catch(c){return{x:0,y:0}}if(!b)return{x:0,y:0};for(var d=-parseInt(b.borderLeftWidth),e=-parseInt(b.borderTopWidth);a.offsetParent;)b=getComputedStyle(a),d+=a.offsetLeft||0,d+=parseInt(b.borderLeftWidth),e+=a.offsetTop||0,e+=parseInt(b.borderTopWidth),a=a.offsetParent;return{x:d,y:e}},b.exports=c},{"./photonui.js":40}],23:[function(a,b){var c=a("../../helpers.js"),d=a("../../widget.js"),e=a("../../visual/baseicon.js"),f=d.$extend({__init__:function(a){this._registerWEvents(["click"]),this.$super(a),this._bindEvent("click",this.__html.button,"click",this.__onButtonClicked.bind(this)),this._updateProperties(["text","leftIconName","rightIconName"]),this._update()},_text:"Button",getText:function(){return this._text},setText:function(a){this._text=a,c.cleanNode(this.__html.text),this.__html.text.appendChild(document.createTextNode(a))},_textVisible:!0,isTextVisible:function(){return this._textVisible},setTextVisible:function(a){this._textVisible=a,this._update()},_leftIconName:null,getLeftIconName:function(){return this._leftIconName},setLeftIconName:function(a){this._leftIconName=a,c.cleanNode(this.__html.leftIcon),this._leftIconName&&(this.__html.leftIcon.appendChild(this.leftIcon.html),this.leftIconVisible=!0)},getLeftIcon:function(){return d.getWidget(this._leftIconName)},setLeftIcon:function(a){return a instanceof e?void(this.leftIconName=a.name):void(this.leftIconName=null)},_leftIconVisible:!0,isLeftIconVisible:function(){return this._leftIconVisible},setLeftIconVisible:function(a){this._leftIconVisible=a,this._update()},_rightIconName:null,getRightIconName:function(){return this._rightIconName},setRightIconName:function(a){this._rightIconName=a,c.cleanNode(this.__html.rightIcon),this._rightIconName&&(this.__html.rightIcon.appendChild(this.rightIcon.html),this.rightIconVisible=!0)},getRightIcon:function(){return d.getWidget(this._rightIconName)},setRightIcon:function(a){return a instanceof e?void(this.rightIconName=a.name):void(this.rightIconName=null)},_rightIconVisible:!0,isRightIconVisible:function(){return this._rightIconVisible},setRightIconVisible:function(a){this._rightIconVisible=a,this._update()},_appearance:"normal",getAppearance:function(){return this._appearance},setAppearance:function(a){this._appearance=a,"flat"==a?this.addClass("photonui-button-appearance-flat"):this.removeClass("photonui-button-appearance-flat")},getHtml:function(){return this.__html.button},_update:function(){this.__html.leftIcon.parentNode==this.__html.button&&this.__html.button.removeChild(this.__html.leftIcon),this.__html.text.parentNode==this.__html.button&&this.__html.button.removeChild(this.__html.text),this.__html.rightIcon.parentNode==this.__html.button&&this.__html.button.removeChild(this.__html.rightIcon),this.leftIconName&&this.leftIconVisible&&this.__html.button.appendChild(this.__html.leftIcon),this.text&&this.textVisible&&this.__html.button.appendChild(this.__html.text),this.rightIconName&&this.rightIconVisible&&this.__html.button.appendChild(this.__html.rightIcon)},_buildHtml:function(){this.__html.button=document.createElement("button"),this.__html.button.className="photonui-widget photonui-button",this.__html.leftIcon=document.createElement("span"),this.__html.leftIcon.className="photonui-button-icon",this.__html.button.appendChild(this.__html.leftIcon),this.__html.text=document.createElement("span"),this.__html.text.className="photonui-button-text",this.__html.button.appendChild(this.__html.text),this.__html.rightIcon=document.createElement("span"),this.__html.rightIcon.className="photonui-button-icon",this.__html.button.appendChild(this.__html.rightIcon)},__onButtonClicked:function(a){this._callCallbacks("click",[a])}});f._buttonMixin={_text:f.prototype._text,getText:f.prototype.getText,setText:f.prototype.setText,_textVisible:f.prototype._textVisible,isTextVisible:f.prototype.isTextVisible,setTextVisible:f.prototype.setTextVisible,_leftIconName:f.prototype._leftIconName,getLeftIconName:f.prototype.getLeftIconName,setLeftIconName:f.prototype.setLeftIconName,getLeftIcon:f.prototype.getLeftIcon,setLeftIcon:f.prototype.setLeftIcon,_leftIconVisible:f.prototype._leftIconVisible,isLeftIconVisible:f.prototype.isLeftIconVisible,setLeftIconVisible:f.prototype.setLeftIconVisible,_rightIconName:f.prototype._rightIconName,getRightIconName:f.prototype.getRightIconName,setRightIconName:f.prototype.setRightIconName,getRightIcon:f.prototype.getRightIcon,setRightIcon:f.prototype.setRightIcon,_rightIconVisible:f.prototype._rightIconVisible,isRightIconVisible:f.prototype.isRightIconVisible,setRightIconVisible:f.prototype.setRightIconVisible,_appearance:f.prototype._appearance,getAppearance:f.prototype.getAppearance,setAppearance:f.prototype.setAppearance,_update:f.prototype._update,_buildButtonHtml:f.prototype._buildHtml,__onButtonClicked:f.prototype.__onButtonClicked},b.exports=f},{"../../helpers.js":22,"../../visual/baseicon.js":41,"../../widget.js":50}],24:[function(a,b){var c=a("../../../lib/stone.js").gettext,d=a("./button.js"),e=a("../color/color.js"),f=a("../color/colorpalette.js"),g=a("../../container/window/popupwindow.js"),h=a("../../container/layout/boxlayout.js"),i=a("../../composite/colorpickerdialog.js"),j=d.$extend({__init__:function(a){this.__widgets={},this._color=new e,this._registerWEvents(["value-changed"]),this.$super(a),this._buildUi(),this._updateProperties(["color"])},getValue:function(){return this.color.hexString},setValue:function(a){this.color.hexString=a},_color:null,getColor:function(){return this._color},setColor:function(a){a instanceof e&&(this._color&&this._color.removeCallback("photonui.colorbutton.value-changed::"+this.name),this._color=a,this._color.registerCallback("photonui.colorbutton.value-changed::"+this.name,"value-changed",this.__onColorChanged,this)),this.__onColorChanged(),a instanceof e&&(this._color=a)},_dialogOnly:!1,isDialogOnly:function(){return this._dialogOnly},setDialogOnly:function(a){this._dialogOnly=!!a},destroy:function(){this._color.removeCallback("photonui.colorbutton.value-changed::"+this.name),this.$super()},_update:function(){},_buildHtml:function(){this.$super(),this.__html.button=document.createElement("button"),this.__html.button.className="photonui-widget photonui-button",this.__html.button.className+=" photonui-colorbutton",this.__html.color=document.createElement("span"),this.__html.button.appendChild(this.__html.color)},_buildUi:function(){this.__widgets.popup=new g,this.__widgets.vbox=new h({verticalSpacing:0,horizontalSpacing:0}),this.__widgets.popup.child=this.__widgets.vbox,this.__widgets.palette=new f,this.__widgets.vbox.addChild(this.__widgets.palette),this.__widgets.custom=new d({text:c("Custom color..."),appearance:"flat"}),this.__widgets.custom.addClass("photonui-colorbutton-custombutton"),this.__widgets.vbox.addChild(this.__widgets.custom),this.__widgets.colorPickerDialog=new i,this.__widgets.palette.registerCallback("value-changed","value-changed",this.__onValueChanged,this),this.__widgets.colorPickerDialog.registerCallback("value-changed","value-changed",this.__onValueChanged,this),this.__widgets.custom.registerCallback("click","click",this.__onCustomButtonClicked,this),this.__widgets.palette.color=this.color,this.__widgets.colorPickerDialog.color=this.color},__onButtonClicked:function(a){this._callCallbacks("click",[a]),this.dialogOnly?(this.__widgets.colorPickerDialog.show(),this.__widgets.colorPickerDialog.center()):this.__widgets.popup.popupWidget(this)},__onValueChanged:function(){this._callCallbacks("value-changed",[this.color])},__onColorChanged:function(){this.__html.color.style.backgroundColor=this.color.hexString},__onCustomButtonClicked:function(){this.__widgets.colorPickerDialog.show(),this.__widgets.colorPickerDialog.center()}});b.exports=j},{"../../../lib/stone.js":1,"../../composite/colorpickerdialog.js":5,"../../container/layout/boxlayout.js":8,"../../container/window/popupwindow.js":18,"../color/color.js":28,
"../color/colorpalette.js":29,"./button.js":23}],25:[function(a,b){var c=a("../../widget.js"),d=c.$extend({__init__:function(a){this._registerWEvents(["value-changed","click"]),this.$super(a),this.inputId=this.name+"-input",this._bindEvent("value-changed",this.__html.checkbox,"change",this.__onChange.bind(this)),this._bindEvent("span-click",this.__html.span,"click",this.__onSpanClick.bind(this)),this._bindEvent("checkbox-click",this.__html.checkbox,"click",this.__onCheckboxClick.bind(this)),this._bindEvent("span-keypress",this.__html.span,"keypress",this.__onSpanKeypress.bind(this)),this.__html.checkbox.name=this.name,this.__html.checkbox.id=this.inputId},getValue:function(){return this.__html.checkbox.checked},setValue:function(a){this.__html.checkbox.checked=a},getHtml:function(){return this.__html.outer},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-checkbox",this.__html.checkbox=document.createElement("input"),this.__html.checkbox.type="checkbox",this.__html.outer.appendChild(this.__html.checkbox),this.__html.span=document.createElement("span"),this.__html.span.tabIndex="0",this.__html.outer.appendChild(this.__html.span)},__onChange:function(){this._callCallbacks("value-changed",[this.value]),"none"==window.getComputedStyle(this.__html.checkbox).display&&this.__html.span.focus()},__onSpanClick:function(a){this.value=!this.value,this._callCallbacks("value-changed",[this.value]),this._callCallbacks("click",[a])},__onCheckboxClick:function(a){this._callCallbacks("click",[a])},__onSpanKeypress:function(a){(32==a.charCode||13==a.keyCode)&&(this.value=!this.value,this._callCallbacks("value-changed",[this.value]))}});b.exports=d},{"../../widget.js":50}],26:[function(a,b){var c=a("./checkbox.js"),d=c.$extend({__init__:function(a){this.$super(a),this.removeClass("photonui-checkbox"),this.addClass("photonui-switch")}});b.exports=d},{"./checkbox.js":25}],27:[function(a,b){var c=a("./checkbox.js"),d=a("../button/button.js"),e=c.$extend({__init__:function(a){this._registerWEvents(["click"]),this.$super(a),this.__buttonInit(),this.removeClass("photonui-checkbox"),this.addClass("photonui-togglebutton")},__buttonInit:function(){this._bindEvent("click",this.__html.button,"click",this.__onButtonClicked.bind(this)),this._updateProperties(["text","leftIconName","rightIconName"]),this._update()},__include__:[d._buttonMixin],_buildHtml:function(){this.$super(),this._buildButtonHtml(),this.__html.outer.appendChild(this.__html.button),this.__html.outer.removeChild(this.__html.span),this.__html.span=this.__html.button}});b.exports=e},{"../button/button.js":23,"./checkbox.js":25}],28:[function(a,b){var c=a("../../base.js"),d=c.$extend({__init__:function(a){this._registerWEvents(["value-changed"]),"object"!=typeof a||Array.isArray(a)?(this.$super(),"string"==typeof a?this.hexString=a:Array.isArray(a)?this.setRGBA(a):arguments.length>=3&&this.setRGBA.apply(this,arguments)):this.$super(a)},getHexString:function(){var a=this.red.toString(16).toUpperCase();1==a.length&&(a="0"+a);var b=this.green.toString(16).toUpperCase();1==b.length&&(b="0"+b);var c=this.blue.toString(16).toUpperCase();return 1==c.length&&(c="0"+c),"#"+a+b+c},setHexString:function(a){var a=a.replace(" ","");if(a.match(/^#[0-9a-f]{6}$/i))this._red=parseInt(a[1]+a[2],16),this._green=parseInt(a[3]+a[4],16),this._blue=parseInt(a[5]+a[6],16),this._updateHSB();else if(a.match(/^#[0-9a-f]{3}$/i))this._red=parseInt(a[1]+a[1],16),this._green=parseInt(a[2]+a[2],16),this._blue=parseInt(a[3]+a[3],16),this._updateHSB();else{var b={white:[255,255,255],silver:[192,192,192],gray:[128,128,128],black:[0,0,0],red:[255,0,0],maroon:[128,0,0],yellow:[255,255,0],olive:[128,128,0],lime:[0,255,0],green:[0,128,0],aqua:[0,255,255],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],fuchsia:[255,0,255],purple:[128,0,128]};void 0!=b[a]&&this.setRGB(b[a])}},getRgbString:function(){return"rgb("+this._red+", "+this._green+", "+this._blue+")"},getRgbaString:function(){return"rgba("+this._red+", "+this._green+", "+this._blue+", "+this._alpha/255+")"},_red:255,getRed:function(){return this._red},setRed:function(a){this._red=Math.max(0,Math.min(255,0|a)),this._updateHSB()},_green:0,getGreen:function(){return this._green},setGreen:function(a){this._green=Math.max(0,Math.min(255,0|a)),this._updateHSB()},_blue:0,getBlue:function(){return this._blue},setBlue:function(a){this._blue=Math.max(0,Math.min(255,0|a)),this._updateHSB()},_alpha:255,getAlpha:function(){return this._alpha},setAlpha:function(a){this._alpha=Math.max(0,Math.min(255,0|a)),this._callCallbacks("value-changed")},_hue:0,getHue:function(){return this._hue},setHue:function(a){this._hue=Math.max(0,Math.min(360,0|a)),this._updateRGB()},_saturation:100,getSaturation:function(){return this._saturation},setSaturation:function(a){this._saturation=Math.max(0,Math.min(100,0|a)),this._updateRGB()},_brightness:100,getBrightness:function(){return this._brightness},setBrightness:function(a){this._brightness=Math.max(0,Math.min(100,0|a)),this._updateRGB()},setRGB:function(){this.setRGBA.apply(this,arguments)},setRGBA:function(){var a=arguments;1==arguments.length&&Array.isArray(arguments[0])&&(a=arguments[0]),a.length<3||(this._red=Math.max(0,Math.min(255,0|a[0])),this._green=Math.max(0,Math.min(255,0|a[1])),this._blue=Math.max(0,Math.min(255,0|a[2])),void 0!=a[3]&&(this._alpha=Math.max(0,Math.min(255,0|a[3]))),this._updateHSB())},getRGB:function(){return[this._red,this._green,this._blue]},getRGBA:function(){return[this._red,this._green,this._blue,this._alpha]},setHSB:function(){var a=arguments;1==arguments.length&&Array.isArray(arguments[0])&&(a=arguments[0]),3==a.length&&(this._hue=Math.max(0,Math.min(360,0|a[0])),this._saturation=Math.max(0,Math.min(100,0|a[1])),this._brightness=Math.max(0,Math.min(100,0|a[2])),this._updateRGB())},toString:function(){return this.hexString},_updateHSB:function(){var a=this._red/255,b=this._green/255,c=this._blue/255,d=Math.min(a,b,c),e=Math.max(a,b,c);e==d?this._hue=0:e==a?this._hue=Math.round((60*(b-c)/(e-d)+360)%360):e==b?this._hue=Math.round(60*(c-a)/(e-d)+120):e==c&&(this._hue=Math.round(60*(a-b)/(e-d)+240)),this._saturation=0==e?0:Math.round(100*(1-d/e)),this._brightness=Math.round(100*e),this._callCallbacks("value-changed")},_updateRGB:function(){var a=this.hue%360,b=this.saturation/100,c=this.brightness/100,d=(a/60|0)%6,e=a/60-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b);switch(d){case 0:this._red=255*c|0,this._green=255*h|0,this._blue=255*f|0;break;case 1:this._red=255*g|0,this._green=255*c|0,this._blue=255*f|0;break;case 2:this._red=255*f|0,this._green=255*c|0,this._blue=255*h|0;break;case 3:this._red=255*f|0,this._green=255*g|0,this._blue=255*c|0;break;case 4:this._red=255*h|0,this._green=255*f|0,this._blue=255*c|0;break;case 5:this._red=255*c|0,this._green=255*f|0,this._blue=255*g|0}this._callCallbacks("value-changed")}});b.exports=d},{"../../base.js":4}],29:[function(a,b){var c=a("../../helpers.js"),d=a("../../widget.js"),e=a("./color.js"),f=d.$extend({__init__:function(a){this._color=new e(f.palette[0][0]),this._registerWEvents(["value-changed"]),this.$super(a),this._updateProperties(["palette","value"])},getValue:function(){return this.color.hexString},setValue:function(a){this.color.hexString=a},_color:null,getColor:function(){return this._color},setColor:function(a){a instanceof e&&(this._color=a)},_palette:null,getPalette:function(){return this._palette||f.palette},setPalette:function(a){if(this._palette=a,!a)var a=f.palette;this.__html.palette.removeChild(this.__html.tbody),c.cleanNode(this.__html.tbody);var b,d,e,g;for(g=0;g<a.length;g++){var b=document.createElement("tr");for(e=0;e<a[g].length;e++){var d=document.createElement("td");d.style.backgroundColor=a[g][e],d.onclick=this.__onColorClicked.bind(this,a[g][e]),b.appendChild(d)}this.__html.tbody.appendChild(b)}this.__html.palette.appendChild(this.__html.tbody)},getHtml:function(){return this.__html.palette},_buildHtml:function(){this.__html.palette=document.createElement("table"),this.__html.palette.className="photonui-widget photonui-colorpalette",this.__html.tbody=document.createElement("tbody"),this.__html.palette.appendChild(this.__html.tbody)},__onColorClicked:function(a){this.value=a,this._callCallbacks("value-changed",[this.color])}});f.palette=[["#000000","#424242","#676767","#989898","#C5C5C5","#FFFFFF"],["#E52131","#ED7130","#F0902C","#F0B922","#EDE118","#7DA638"],["#EA4852","#F08D52","#F3A752","#F9D246","#F0EC51","#A7CF41"],["#F19096","#F5BC93","#F9CB94","#F9E48A","#F2F08E","#C6DE84"],["#F8D1D6","#F9E2D2","#F9E8D3","#FDF8D2","#F9F9CF","#E7F1CD"],["#1E9E85","#2A7DB5","#2751A1","#6C3E98","#A33E97","#DF3795"],["#2FB8A3","#40A1D7","#4072B5","#8963AB","#B462A7","#E262A5"],["#88CEC3","#8CC9E9","#87A8D3","#D2A0C9","#D2A0C9","#EDA0C6"],["#CEEAE7","#CDE9F8","#CFDEEF","#EED9E9","#EED9E9","#F8D7E7"]],b.exports=f},{"../../helpers.js":22,"../../widget.js":50,"./color.js":28}],30:[function(a,b){var c=(a("../../helpers.js"),a("../../widget.js")),d=a("./color.js"),e=a("../../event/mousemanager.js"),f=c.$extend({__init__:function(a){this._registerWEvents(["value-changed"]),this._color=new d,this.__buffH=document.createElement("canvas"),this.__buffH.width=200,this.__buffH.height=200,this.__buffSB=document.createElement("canvas"),this.__buffSB.width=100,this.__buffSB.height=100,this.__buffSBmask=document.createElement("canvas"),this.__buffSBmask.width=100,this.__buffSBmask.height=100,this.$super(a),this._updateH(),this._updateSB(),this._updateSBmask(),this._updateCanvas(),this._updateProperties(["color"]),this.__mouseManager=new e(this.__html.canvas),this.__mouseManager.registerCallback("click","mouse-move",this.__onMouseMove.bind(this)),this.__mouseManager.registerCallback("mouse-down","mouse-down",this.__onMouseDown.bind(this)),this.__mouseManager.registerCallback("drag-start","drag-start",this.__onDragStart.bind(this)),this._bindEvent("value-changed",this.__html.preview,"change",this.__onValueChanged.bind(this))},getValue:function(){return this.color.hexString},setValue:function(a){this.color.hexString=a,this._updateSB(),this._updateCanvas()},_color:null,getColor:function(){return this._color},setColor:function(a){a instanceof d&&(this._color&&this._color.removeCallback("photonui.colorpicker.value-changed::"+this.name),this._color=a,this._color.registerCallback("photonui.colorpicker.value-changed::"+this.name,"value-changed",function(){this._updateSB(),this._updateCanvas()}.bind(this)),this._updateSB(),this._updateCanvas())},getHtml:function(){return this.__html.outer},__buffH:null,__buffSB:null,__mouseManager:null,__disableSBUpdate:!1,destroy:function(){this.__mouseManager.destroy(),this._color.removeCallback("photonui.colorpicker.value-changed::"+this.name),this.$super()},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-colorpicker",this.__html.canvas=document.createElement("canvas"),this.__html.canvas.width=200,this.__html.canvas.height=200,this.__html.outer.appendChild(this.__html.canvas),this.__html.previewOuter=document.createElement("span"),this.__html.previewOuter.className="photonui-colorpicker-previewouter",this.__html.outer.appendChild(this.__html.previewOuter),this.__html.preview=document.createElement("input"),this.__html.preview.type="text",this.__html.preview.autocomplete="off",this.__html.preview.spellcheck=!1,this.__html.preview.className="photonui-colorpicker-preview",this.__html.previewOuter.appendChild(this.__html.preview)},_updateH:function(){var a=this.__buffH,b=a.getContext("2d"),c=new d;b.clearRect(0,0,a.width,a.height);for(var e=0;360>e;e++)c.hue=360-e,b.beginPath(),b.fillStyle=c.hexString,b.arc(100,100,90,Math.PI*e/180,Math.PI*((e+2)%360)/180,!1),b.lineTo(100,100),b.fill();b.beginPath(),b.fillStyle="#000",b.arc(100,100,73,2*Math.PI,!1),b.globalCompositeOperation="destination-out",b.fill()},_updateSBmask:function(){var a=this.__buffSBmask,b=a.getContext("2d"),c=b.getImageData(0,0,a.width,a.height),d=0,e=0,f=0,g=0;for(f=0;100>f;f++)for(g=0;100>g;g++)d=400*f+4*g,e=(.5*(1-g/100)+.5)*(1-f/100)*255<<0,c.data[d+0]=e,c.data[d+1]=e,c.data[d+2]=e,c.data[d+3]=255*(1-g/100*(1-f/100))<<0;b.putImageData(c,0,0)},_updateSB:function(){if(!this.__disableSBUpdate){var a=this.__buffSB,b=a.getContext("2d"),c=new d({hue:this.color.hue,saturation:100,brightness:100});b.save(),b.clearRect(0,0,a.width,a.height),b.fillStyle=c.hexString,b.rect(0,0,a.width,a.height),b.fill(),b.drawImage(this.__buffSBmask,0,0),b.restore()}},_updateCanvas:function(){var a=this.__html.canvas,b=a.getContext("2d");b.save(),b.clearRect(0,0,a.width,a.height),b.drawImage(this.__buffH,0,0),b.drawImage(this.__buffSB,50,50),b.strokeStyle="#fff",b.shadowColor="rgba(0, 0, 0, .7)",b.shadowBlur=3,b.lineWidth=2,b.beginPath(),b.arc(this.color.saturation+50,100-this.color.brightness+50,6,2*Math.PI,!1),b.stroke(),b.translate(100,100),b.rotate(-this.color.hue*Math.PI/180),b.beginPath(),b.arc(81,0,6,2*Math.PI,!1),b.stroke(),b.restore(),this.__html.preview.style.backgroundColor=this.color.rgbaString,this.__html.preview.value=this.color.hexString},_pointerOnSquare:function(a){return a.x>=50&&a.x<=150&&a.y>=50&&a.y<=150},_pointerOnCircle:function(a){var b=Math.abs(100-a.x),c=Math.abs(100-a.y),d=Math.sqrt(b*b+c*c);return d>=74&&90>=d},_pointerAngle:function(a){var b=Math.abs(100-a.x),c=Math.abs(100-a.y),d=180*Math.atan(c/b)/Math.PI;return a.x<100&&a.y<100?d=180-d:a.x<100&&a.y>=100?d+=180:a.x>=100&&a.y>100&&(d=360-d),0|d},__onMouseMove:function(a,b){this.__html.canvas.style.cursor=this._pointerOnSquare(b)||this._pointerOnCircle(b)?"crosshair":"default"},__onMouseDown:function(a,b){this._pointerOnSquare(b)?(this.__disableSBUpdate=!0,this.color.saturation=b.x-50,this.color.brightness=150-b.y,this.__disableSBUpdate=!1,this._callCallbacks("value-changed",this.color)):this._pointerOnCircle(b)&&(this.color.hue=this._pointerAngle(b),this._callCallbacks("value-changed",this.color))},__onDragStart:function(a,b){this._pointerOnSquare(b)?(this.__disableSBUpdate=!0,this.__mouseManager.registerCallback("dragging","dragging",this.__onDraggingSquare.bind(this)),this.__mouseManager.registerCallback("drag-end","drag-end",this.__onDragEnd.bind(this))):this._pointerOnCircle(b)&&(this.__mouseManager.registerCallback("dragging","dragging",this.__onDraggingCircle.bind(this)),this.__mouseManager.registerCallback("drag-end","drag-end",this.__onDragEnd.bind(this)))},__onDraggingSquare:function(a,b){this.color.saturation=b.x-50,this.color.brightness=150-b.y,this._callCallbacks("value-changed",this.color)},__onDraggingCircle:function(a,b){this.color.hue=this._pointerAngle(b),this._callCallbacks("value-changed",this.color)},__onDragEnd:function(){this.__mouseManager.removeCallback("dragging"),this.__mouseManager.removeCallback("drag-end"),this.__disableSBUpdate=!1},__onValueChanged:function(){this.color.hexString=this.__html.preview.value,this.__html.preview.value=this.color.hexString,this._callCallbacks("value-changed",this.color)}});b.exports=f},{"../../event/mousemanager.js":21,"../../helpers.js":22,"../../widget.js":50,"./color.js":28}],31:[function(a,b){var c=a("../../widget.js"),d=c.$extend({__init__:function(a){this._registerWEvents(["value-changed","keydown","keyup","keypress","selection-changed"]),this.$super(a),this._updateProperties(["value","placeholder"]),this.__html.field.name=this.name},getValue:function(){return this.__html.field.value},setValue:function(a){this.__html.field.value=a},_placeholder:"",getPlaceholder:function(){return this._placeholder},setPlaceholder:function(a){this._placeholder=a,this.__html.field.placeholder=a},getHtml:function(){return this.__html.field},_bindFieldEvents:function(){this._bindEvent("value-changed",this.__html.field,"change",function(){this._callCallbacks("value-changed",[this.getValue()])}.bind(this)),this._bindEvent("keydown",this.__html.field,"keydown",function(a){this._callCallbacks("keydown",[a])}.bind(this)),this._bindEvent("keyup",this.__html.field,"keyup",function(a){this._callCallbacks("keyup",[a])}.bind(this)),this._bindEvent("keypress",this.__html.field,"keypress",function(a){this._callCallbacks("keypress",[a])}.bind(this)),this._bindEvent("selection-changed",this.__html.field,"select",function(a){this._callCallbacks("selection-changed",[this.__html.field.selectionStart,this.__html.field.selectionEnd,(""+this.getValue()).substring(this.__html.field.selectionStart,this.__html.field.selectionEnd),a])}.bind(this))},__onContextMenu:function(a){a.stopPropagation()}});b.exports=d},{"../../widget.js":50}],32:[function(a,b){var c=a("./field.js"),d=c.$extend({__init__:function(a){this.$super(a),this._updateProperties(["value"]),this._bindFieldEvents(),this._unbindEvent("value-changed"),this._bindEvent("keypress",this.__html.field,"keypress",this.__onKeypress.bind(this)),this._bindEvent("keyup",this.__html.field,"keyup",this.__onKeyup.bind(this)),this._bindEvent("keydown",this.__html.field,"keydown",this.__onKeydown.bind(this)),this._bindEvent("change",this.__html.field,"change",this.__onChange.bind(this)),this._bindEvent("mousewheel",this.__html.field,"mousewheel",this.__onMouseWheel.bind(this)),this._bindEvent("mousewheel-firefox",this.__html.field,"DOMMouseScroll",this.__onMouseWheel.bind(this))},_min:null,getMin:function(){return this._min},setMin:function(a){this._min=a},_max:null,getMax:function(){return this._max},setMax:function(a){this._max=a},_step:1,getStep:function(){return this._step},setStep:function(a){this._step=Math.abs(a)},_decimalDigits:null,getDecimalDigits:function(){return this._decimalDigits},setDecimalDigits:function(a){this._decimalDigits=a},_decimalSymbol:".",getDecimalSymbol:function(){return this._decimalSymbol},setDecimalSymbol:function(a){this._decimalSymbol=a},_value:0,getValue:function(){return parseFloat(this._value)},setValue:function(a){this._updateValue(a),this._updateFieldValue()},_updateValue:function(a){a=(""+a).replace(",","."),a=a.replace(/ /g,""),a=parseFloat(a),isNaN(a)&&(a=0),null!=this.min&&(a=Math.max(this.min,a)),null!=this.max&&(a=Math.min(this.max,a)),null!=this.decimalDigits&&(a=a.toFixed(this.decimalDigits)),this._value=a},_updateFieldValue:function(){this.__html.field.value=(""+this._value).replace(".",this.decimalSymbol)},_validateInput:function(a){var a=""+a;return a=a.replace(/ /g,""),/^-?[0-9]*(\.|,)?[0-9]*$/.test(a)&&(0!=this.decimalDigits||/^-?[0-9]*$/.test(a))?null!==this.min&&this.min>=0&&"-"==a[0]?!1:!0:!1},_buildHtml:function(){this.__html.field=document.createElement("input"),this.__html.field.className="photonui-widget photonui-field photonui-field-numeric",this.__html.field.type="text"},__onKeypress:function(a){if(!a.ctrlKey)if(13==a.keyCode)this._updateFieldValue(),this._callCallbacks("value-changed",[this.value]);else{var b=this.__html.field,c=b.value.slice(0,b.selectionStart)+String.fromCharCode(a.charCode)+b.value.slice(b.selectionEnd);this._validateInput(c)||a.preventDefault()}},__onKeyup:function(){var a=this.__html.field.value.replace(/[^0-9.,-]*/g,"");a!=this.__html.field.value&&(this.__html.field.value=a),this._updateValue(this.__html.field.value)},__onChange:function(){this._updateFieldValue(),this._callCallbacks("value-changed",[this.value])},__onMouseWheel:function(a){if(document.activeElement==this.__html.field){var b=null;void 0!=a.wheelDeltaY&&(b=a.wheelDeltaY),void 0!=a.wheelDelta&&(b=a.wheelDelta),void 0!=a.axis&&void 0!=a.detail&&2==a.axis&&(b=-a.detail),null!=b&&(b>=0?this.value+=this.step:this.value-=this.step,a.preventDefault()),this._callCallbacks("value-changed",[this.value])}},__onKeydown:function(a){38==a.keyCode?(this.setValue(this.getValue()+this.step),a.preventDefault(),this._callCallbacks("value-changed",[this.value])):40==a.keyCode&&(this.setValue(this.getValue()-this.step),a.preventDefault(),this._callCallbacks("value-changed",[this.value]))}});b.exports=d},{"./field.js":31}],33:[function(a,b){var c=a("./field.js"),d=c.$extend({__init__:function(a){this.$super(a),this._bindFieldEvents()},getCols:function(){return parseInt(this.__html.field.cols)},setCols:function(a){this.__html.field.cols=a},getRows:function(){return parseInt(this.__html.field.rows)},setRows:function(a){this.__html.field.rows=a},_buildHtml:function(){this.__html.field=document.createElement("textarea"),this.__html.field.className="photonui-widget photonui-field photonui-field-textarea",this.__html.field.cols=20,this.__html.field.rows=3}});b.exports=d},{"./field.js":31}],34:[function(a,b){var c=a("./field.js"),d=c.$extend({__init__:function(a){this.$super(a),this._bindFieldEvents()},getType:function(){return this.__html.field.type},setType:function(a){if("text"!=a&&"password"!=a&&"email"!=a&&"search"!=a&&"tel"!=a&&"url"!=a)throw'Error: The type should be "text", "password", "email", "search", "tel" or "url".';this.__html.field.type=a},_buildHtml:function(){this.__html.field=document.createElement("input"),this.__html.field.className="photonui-widget photonui-field photonui-field-text",this.__html.field.type="text"}});b.exports=d},{"./field.js":31}],35:[function(a,b){var c=a("../../../lib/stone.js"),d=a("./select.js"),e=a("../../container/menu/menuitem.js"),f=d.$extend({__init__:function(a){this._fonts=[],this.$super(a),0==this.fonts.length&&(this.fonts=["sans-serif","serif","monospace"])},_fonts:null,getFonts:function(){return this._fonts},setFonts:function(a){this._fonts=[];for(var b=0;b<a.length;b++)this.addFont(a[b])},_value:"sans-serif",_placeholder:c.lazyGettext("Select a font..."),addFont:function(a){var b=new e({value:a,text:a});b.html.style.fontFamily=a,this.addChild(b),this._fonts.push(a)}});b.exports=f},{"../../../lib/stone.js":1,"../../container/menu/menuitem.js":13,"./select.js":36}],36:[function(a,b){var c=a("../../../lib/stone.js"),d=a("../../helpers.js"),e=a("../../widget.js"),f=a("../../composite/popupmenu.js"),g=a("../../container/menu/menuitem.js"),h=e.$extend({__init__:function(a){this.__popupMenu=new f({maxHeight:300,className:"photonui-select-popup"}),this.__popupMenu.iconVisible=!1,this._registerWEvents(["value-changed"]),this.$super(a),this._updateProperties(["value"]),this._bindEvent("popup",this.html,"click",this.__onClick.bind(this)),this.setValue(a.value||this.value,!0)},_value:"",getValue:function(){return this._value},setValue:function(a,b){if(this.value!=a||b){for(var c=this.__popupMenu.children,e=0;e<c.length;e++)if(c[e]instanceof g&&c[e].value==a)return this._value=a,d.cleanNode(this.__html.select),void this.__html.select.appendChild(c[e].html.cloneNode(!0));this._value="";var f=new g({text:this.placeholder,className:"photonui-select-placeholder"});d.cleanNode(this.__html.select),this.__html.select.appendChild(f.html)}},_placeholder:c.lazyGettext("Select..."),getPlaceholder:function(){return this._placeholder},setPlaceholder:function(a){this._placeholder=a},getChildren:function(){return this.__popupMenu.getChildren()},setChildren:function(a){this.__popupMenu.setChildren(a),this._updateItemsBinding()},getChildrenNames:function(){return this.__popupMenu.getChildrenNames()},setChildrenNames:function(a){this.__popupMenu.setChildrenNames(a),this._updateItemsBinding()},getPopupWidth:function(){return this.__popupMenu.getWidth()},setPopupWidth:function(a){this.__popupMenu.setWidth(a)},getPopupHeight:function(){return this.__popupMenu.getHeight()},setPopupHeight:function(a){this.__popupMenu.setHeight(a)},getPopupMaxWidth:function(){return this.__popupMenu.getMaxWidth()},setPopupMaxWidth:function(a){this.__popupMenu.setMaxWidth(a)},getPopupMinWidth:function(){return this.__popupMenu.getMinWidth()},setPopupMinWidth:function(a){this.__popupMenu.setMinWidth(a)},getPopupMaxHeight:function(){return this.__popupMenu.getMaxHeight()},setPopupMaxHeight:function(a){this.__popupMenu.setMaxHeight(a)},getPopupMinHeight:function(){return this.__popupMenu.getMinHeight()},setPopupMinHeight:function(a){this.__popupMenu.setMinHeight(a)},getPopupOffsetWidth:function(){return this.__popupMenu.getOffsetWidth()},getPopupOffsetHeight:function(){return this.__popupMenu.getOffsetHeight()},getPopupPadding:function(){return this.__popupMenu.getPadding()},setPopupPadding:function(a){this.__popupMenu.setPadding(a)},isIconVisible:function(){return this.__popupMenu.isIconVisible()},setIconVisible:function(a){this.__popupMenu.setIconVisible(a)},getHtml:function(){return this.__html.select},__popupMenu:null,addChild:function(a,b){this.__popupMenu.addChild(a,b),this._updateItemsBinding()},destroy:function(){this.__popupMenu.destroy(),this.$super()},_buildHtml:function(){this.__html.select=document.createElement("div"),this.__html.select.className="photonui-widget photonui-select",this.__html.select.tabIndex="0"},_updateItemsBinding:function(){for(var a=this.__popupMenu.children,b=0;b<a.length;b++)a[b]instanceof g&&a[b].registerCallback(this.name+"-click","click",this.__onItemClicked,this)},__onClick:function(){this.__popupMenu.popupWidget(this)},__onItemClicked:function(a){this.value=a.value,this._callCallbacks("value-changed",[this.value])}});b.exports=h},{"../../../lib/stone.js":1,"../../composite/popupmenu.js":6,"../../container/menu/menuitem.js":13,"../../helpers.js":22,"../../widget.js":50}],37:[function(a,b){var c=a("../../helpers.js"),d=a("../field/numericfield.js"),e=d.$extend({__init__:function(a){this.$super(a),this.inputId=this.name+"-field",this.__html.field.id=this.inputId,this._updateProperties(["fieldVisible"]),this._bindEvent("slider-mousedown",this.__html.slider,"mousedown",this.__onSliderMouseDown.bind(this)),this._bindEvent("slider-keydown",this.__html.slider,"keydown",this.__onSliderKeyDown.bind(this)),this._bindEvent("slider-mousewheel",this.__html.slider,"mousewheel",this.__onSliderMouseWheel.bind(this)),this._bindEvent("slider-mousewheel-firefox",this.__html.slider,"DOMMouseScroll",this.__onSliderMouseWheel.bind(this)),this._bindEvent("field-contextmenu",this.__html.field,"contextmenu",this.__onFieldContextMenu.bind(this))},_min:0,_max:100,_decimalDigits:0,_fieldVisible:!0,isFieldVisible:function(){return this._fieldVisible},setFieldVisible:function(a){this._fieldVisible=a,a?(this.__html.field.style.display="",this.removeClass("photonui-slider-nofield")):(this.__html.field.style.display="none",this.addClass("photonui-slider-nofield"))},getHtml:function(){return setTimeout(function(){this.value=this.value}.bind(this),.01),this.__html.outer},setValue:function(a){this.$super(a);var b=a-this.min,c=this.max-this.min,d=Math.min(Math.max(b/c,0),1),e=this.__html.slider.offsetWidth-this.__html.grip.offsetWidth-4;this.__html.grip.style.left=Math.floor(d*e)+2+"px"},_buildHtml:function(){this.$super(),this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-slider",this.__html.slider=document.createElement("div"),this.__html.slider.className="photonui-slider-slider",this.__html.slider.tabIndex=0,this.__html.outer.appendChild(this.__html.slider),this.__html.grip=document.createElement("div"),this.__html.grip.className="photonui-slider-grip",this.__html.slider.appendChild(this.__html.grip),this.__html.outer.appendChild(this.__html.field)},_updateFromMouseEvent:function(a){var b=c.getAbsolutePosition(this.__html.slider).x,d=this.__html.grip.offsetWidth,e=Math.round(a.pageX-b-d/2),f=this.__html.slider.offsetWidth-d-3,g=(this.max-this.min)*e/f+this.min;this.value=Math.round(g/this.step)*this.step,this._callCallbacks("value-changed",[this.value])},__onSliderMouseDown:function(a){this._updateFromMouseEvent(a),this._bindEvent("slider-mousemove",document,"mousemove",this.__onSliderMouseMove.bind(this)),this._bindEvent("slider-mouseup",document,"mouseup",this.__onSliderMouseUp.bind(this))},__onSliderMouseMove:function(a){this._updateFromMouseEvent(a)},__onSliderMouseUp:function(a){this._unbindEvent("slider-mousemove"),this._unbindEvent("slider-mouseup"),this._updateFromMouseEvent(a)},__onSliderKeyDown:function(a){38==a.keyCode||39==a.keyCode?(this.value+=this.step,this._callCallbacks("value-changed",[this.value])):(40==a.keyCode||37==a.keyCode)&&(this.value-=this.step,this._callCallbacks("value-changed",[this.value]))},__onSliderMouseWheel:function(a){var b=null;void 0!=a.wheelDeltaY&&(b=a.wheelDeltaY),void 0!=a.wheelDelta&&(b=a.wheelDelta),void 0!=a.axis&&void 0!=a.detail&&2==a.axis&&(b=-a.detail),null!=b&&(b>=0?this.value+=this.step:this.value-=this.step,a.preventDefault(),a.stopPropagation()),this._callCallbacks("value-changed",[this.value])},__onContextMenu:function(a){a.stopPropagation(),a.preventDefault(),this.contextMenuName&&this.contextMenu.popupXY(a.pageX,a.pageY)},__onFieldContextMenu:function(a){a.stopPropagation()}});b.exports=e},{"../../helpers.js":22,"../field/numericfield.js":32}],38:[function(a,b){var c=a("../base.js"),d=c.$extend({__init__:function(a){this.__fileField=document.createElement("input"),this.__fileField.type="file",this.__fileField.addEventListener("change",this.__onFileSelected.bind(this),!1),this.__fileField.style.position="fixed",this.__fileField.style.top=0,this.__fileField.style.left=0,this.__fileField.style.opacity=0,this.__fileField.style.display="none",document.getElementsByTagName("body")[0].appendChild(this.__fileField),this._acceptedMimes=[],this._acceptedExts=[],this._registerWEvents(["file-open"]),this.$super(a)},_acceptedMimes:[],getAcceptedMimes:function(){return this._acceptedMimes},setAcceptedMimes:function(a){this._acceptedMimes=a,this._updateAccepted()},_acceptedExts:[],getAcceptedExts:function(){return this._acceptedExts},setAcceptedExts:function(a){this._acceptedExts=a,this._updateAccepted()},_dropZone:null,getDropZone:function(){return this._dropZone},setDropZone:function(a){this._dropZone&&(this._unbindEvent("document-dragover"),this._unbindEvent("document-drop"),this._unbindEvent("element-dragover"),this._unbindEvent("element-drop")),this._dropZone=a,a&&(this._bindEvent("document-dragover",document,"dragover",function(a){a.preventDefault()}),this._bindEvent("document-drop",document,"drop",function(a){a.preventDefault()}),this._bindEvent("element-dragover",document,"dragover",function(){}),this._bindEvent("element-drop",document,"drop",this.__onFileDropped.bind(this)))},_multiselect:!1,getMultiselect:function(){return this._multiselect},setMultiselect:function(a){this._multiselect=a,a?this.__fileField.multiple="true":delete this.__fileField.multiple},__fileField:null,open:function(){this.__fileField.style.display="inline-block",this.__fileField.focus(),this.__fileField.click(),this.__fileField.style.display="none"},destroy:function(){document.getElementsByTagName("body")[0].removeChild(this.__fileField),this.$super()},_updateAccepted:function(){for(var a=[],b=0;b<this.acceptedExts.length;b++)a.push("."+this.acceptedExts[b].toLocaleLowerCase());a=a.concat(this.acceptedMimes),this.__fileField.accept=a.join(",")},_openFile:function(a,b,c){for(var d=!1,e=0;e<this.acceptedMimes.length;e++)if(a.type==this.acceptedMimes[e]){d=!0;break}if(!d)for(var f=a.name.split(".").splice(-1),g=0;g<this.acceptedExts.length;g++)if(f==this.acceptedExts[g]){d=!0;break}d&&this._callCallbacks("file-open",[a,b,c])},__onFileDropped:function(a){for(var b in a.dataTransfer.files){var c=a.dataTransfer.files[b];c instanceof File&&this._openFile(c,a.pageX,a.pageY)}},__onFileSelected:function(){for(var a in this.__fileField.files){var b=this.__fileField.files[a];b instanceof File&&this._openFile(b)}},__onLocaleChanged:function(){}});b.exports=d},{"../base.js":4}],39:[function(a,b){var c=a("../../lib/stone.js"),d=a("../base.js"),e=d.$extend({__init__:function(a){this._registerWEvents(["locale-changed"]),this.$super(a),this._bindEvent("locale-changed",document,"stonejs-locale-changed",this.__onStonejsLocaleChanged.bind(this)),window._=this.lazyGettext},getLocale:c.getLocale,setLocale:c.setLocale,addCatalogs:c.addCatalogs,guessUserLanguage:c.guessUserLanguage,gettext:c.gettext,lazyGettext:c.lazyGettext,enableDomScan:c.enableDomScan,updateDomTranslation:c.updateDomTranslation,__onStonejsLocaleChanged:function(){
this._callCallbacks("locale-changed",[this.locale])}});b.exports=e},{"../../lib/stone.js":1,"../base.js":4}],40:[function(a,b){var c={};c.Helpers=a("./helpers.js"),c.Base=a("./base.js"),c.Widget=a("./widget.js"),c.FileManager=a("./misc/filemanager.js"),c.Translation=a("./misc/translation.js"),c.AccelManager=a("./event/accelmanager.js"),c.MouseManager=a("./event/mousemanager.js"),c.BaseIcon=a("./visual/baseicon.js"),c.FAIcon=a("./visual/faicon.js"),c.SpriteSheet=a("./visual/spritesheet.js"),c.SpriteIcon=a("./visual/spriteicon.js"),c.Canvas=a("./visual/canvas.js"),c.Label=a("./visual/label.js"),c.Text=a("./visual/text.js"),c.ProgressBar=a("./visual/progressbar.js"),c.Separator=a("./visual/separator.js"),c.Button=a("./input/button/button.js"),c.ColorButton=a("./input/button/colorbutton.js"),c.CheckBox=a("./input/checkbox/checkbox.js"),c.Switch=a("./input/checkbox/switch.js"),c.ToggleButton=a("./input/checkbox/togglebutton.js"),c.Color=a("./input/color/color.js"),c.ColorPalette=a("./input/color/colorpalette.js"),c.ColorPicker=a("./input/color/colorpicker.js"),c.Field=a("./input/field/field.js"),c.NumericField=a("./input/field/numericfield.js"),c.TextAreaField=a("./input/field/textareafield.js"),c.TextField=a("./input/field/textfield.js"),c.Select=a("./input/select/select.js"),c.FontSelect=a("./input/select/fontselect.js"),c.Slider=a("./input/slider/slider.js"),c.Container=a("./container/container.js"),c.Layout=a("./container/layout/layout.js"),c.BoxLayout=a("./container/layout/boxlayout.js"),c.FluidLayout=a("./container/layout/fluidlayout.js"),c.GridLayout=a("./container/layout/gridlayout.js"),c.Menu=a("./container/menu/menu.js"),c.MenuItem=a("./container/menu/menuitem.js"),c.SubMenuItem=a("./container/menu/submenuitem.js"),c.Viewport=a("./container/viewport/viewport.js"),c.BaseWindow=a("./container/window/basewindow.js"),c.Window=a("./container/window/window.js"),c.PopupWindow=a("./container/window/popupwindow.js"),c.Dialog=a("./container/window/dialog.js"),c.ColorPickerDialog=a("./composite/colorpickerdialog.js"),c.PopupMenu=a("./composite/popupmenu.js"),c.domInsert=c.Widget.domInsert,c.getWidget=c.Widget.getWidget,c.lib={},c.lib.Class=a("classyjs"),c.lib.KeyboardJS=a("keyboardjs"),c.lib.Stone=a("../lib/stone"),b.exports=c},{"../lib/stone":1,"./base.js":4,"./composite/colorpickerdialog.js":5,"./composite/popupmenu.js":6,"./container/container.js":7,"./container/layout/boxlayout.js":8,"./container/layout/fluidlayout.js":9,"./container/layout/gridlayout.js":10,"./container/layout/layout.js":11,"./container/menu/menu.js":12,"./container/menu/menuitem.js":13,"./container/menu/submenuitem.js":14,"./container/viewport/viewport.js":15,"./container/window/basewindow.js":16,"./container/window/dialog.js":17,"./container/window/popupwindow.js":18,"./container/window/window.js":19,"./event/accelmanager.js":20,"./event/mousemanager.js":21,"./helpers.js":22,"./input/button/button.js":23,"./input/button/colorbutton.js":24,"./input/checkbox/checkbox.js":25,"./input/checkbox/switch.js":26,"./input/checkbox/togglebutton.js":27,"./input/color/color.js":28,"./input/color/colorpalette.js":29,"./input/color/colorpicker.js":30,"./input/field/field.js":31,"./input/field/numericfield.js":32,"./input/field/textareafield.js":33,"./input/field/textfield.js":34,"./input/select/fontselect.js":35,"./input/select/select.js":36,"./input/slider/slider.js":37,"./misc/filemanager.js":38,"./misc/translation.js":39,"./visual/baseicon.js":41,"./visual/canvas.js":42,"./visual/faicon.js":43,"./visual/label.js":44,"./visual/progressbar.js":45,"./visual/separator.js":46,"./visual/spriteicon.js":47,"./visual/spritesheet.js":48,"./visual/text.js":49,"./widget.js":50,classyjs:2,keyboardjs:3}],41:[function(a,b){var c=a("../widget.js"),d=c.$extend({__onLocaleChanged:function(){}});b.exports=d},{"../widget.js":50}],42:[function(a,b){var c=a("../widget.js"),d=c.$extend({__init__:function(a){this.$super(a),this._updateProperties(["width","height"]),this.getContext=this.__html.canvas.getContext.bind(this.__html.canvas),this.__html.canvas.supportsContext&&(this.supportsContext=this.__html.canvas.supportsContext.bind(this.__html.canvas)),this.__html.canvas.setContext&&(this.setContext=this.__html.canvas.setContext.bind(this.__html.canvas)),this.__html.canvas.transferControlToProxy&&(this.transferControlToProxy=this.__html.canvas.transferControlToProxy.bind(this.__html.canvas)),this.toDataURL=this.__html.canvas.toDataURL.bind(this.__html.canvas),this.__html.canvas.toDataURLHD&&(this.toDataURLHD=this.__html.canvas.toDataURLHD.bind(this.__html.canvas)),this.__html.canvas.toBlob&&(this.toBlob=this.__html.canvas.toBlob.bind(this.__html.canvas)),this.__html.canvas.toBlobHD&&(this.toBlobHD=this.__html.canvas.toBlobHD.bind(this.__html.canvas))},getWidth:function(){return this.__html.canvas.width},setWidth:function(a){this.__html.canvas.width=a||300},getHeight:function(){return this.__html.canvas.height},setHeight:function(a){this.__html.canvas.height=a||150},getCanvas:function(){return this.__html.canvas},getHtml:function(){return this.__html.outer},getInteractiveNode:function(){return this.__html.canvas},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-canvas",this.__html.canvas=document.createElement("canvas"),this.__html.outer.appendChild(this.__html.canvas)},__onLocaleChanged:function(){}});b.exports=d},{"../widget.js":50}],43:[function(a,b){var c=a("./baseicon.js"),d=c.$extend({__init__:function(a,b){var c={};if(a&&"string"==typeof a){if(c.iconName=a,b&&"object"==typeof b)for(var d in b)c[d]=b[d]}else a&&(c=a);this.$super(c),this._updateProperties(["iconName","size","color"])},_iconName:"",getIconName:function(){return this._iconName},setIconName:function(a){this._iconName=a||"",this.__html.icon.className="fa "+this.iconName+" "+this.size},_size:"",getSize:function(){return this._size},setSize:function(a){this._size=a||"",this.__html.icon.className="fa "+this.iconName+" "+this.size},_color:"inherit",getColor:function(){return this._color},setColor:function(a){this._color=a||"inherit",this.__html.icon.style.color=this.color},getHtml:function(){return this.__html.outer},_buildHtml:function(){this.__html.outer=document.createElement("span"),this.__html.outer.className="photonui-widget photonui-icon photonui-faicon",this.__html.icon=document.createElement("i"),this.__html.outer.appendChild(this.__html.icon)}});b.exports=d},{"./baseicon.js":41}],44:[function(a,b){var c=a("../widget.js"),d=a("../helpers.js"),e=c.$extend({__init__:function(a){var a=a||{};a.layoutOptions=a.layoutOptions||{},void 0===a.layoutOptions.verticalExpansion&&(a.layoutOptions.verticalExpansion=!1),this.$super(a),this._updateProperties(["text","textAlign","forInputName"])},_text:"Label",getText:function(){return this._text},setText:function(a){this._text=a,photonui.Helpers.cleanNode(this.__html.label),this.__html.label.appendChild(document.createTextNode(a))},_textAlign:"left",getTextAlign:function(){return this._textAlign},setTextAlign:function(a){if("left"!=a&&"center"!=a&&"right"!=a)throw"Text alignement sould be 'left', 'center' or 'right'.";this._textAlign=a,this.__html.label.style.textAlign=a},_forInputName:null,getForInputName:function(){return this._forInputName},setForInputName:function(a){this._forInputName=a,this._forInputName&&this.__html.label.setAttribute("for",d.escapeHtml(this.forInput.inputId||this.forInput.name))},getForInput:function(){return c.getWidget(this.forInputName)},setForInput:function(a){this.forInputName=a.name},getHtml:function(){return this.__html.label},_buildHtml:function(){this.__html.label=document.createElement("label"),this.__html.label.className="photonui-widget photonui-label"}});b.exports=e},{"../helpers.js":22,"../widget.js":50}],45:[function(a,b){var c=a("../widget.js"),d=c.$extend({__init__:function(a){this.$super(a),this._updateProperties(["orientation","value","pulsate"])},getHtml:function(){return this.__html.outer},_value:0,getValue:function(){return this._value},setValue:function(a){this._value=Math.min(Math.max(a,0),1),"horizontal"==this.orientation?this.__html.bar.style.width=Math.floor(100*this.value)+"%":this.__html.bar.style.height=Math.floor(100*this.value)+"%",this.__html.textContent.innerHTML=Math.floor(100*this.value)+" %"},_orientation:"horizontal",getOrientation:function(){return this._orientation},setOrientation:function(a){if("vertical"!=a&&"horizontal"!=a)throw'Error: The orientation should be "vertical" or "horizontal".';this._orientation=a,this.removeClass("photonui-progressbar-vertical"),this.removeClass("photonui-progressbar-horizontal"),this.addClass("photonui-progressbar-"+this.orientation)},_pulsate:!1,isPulsate:function(){return this._pulsate},setPulsate:function(a){this._pulsate=a,a?(this.addClass("photonui-progressbar-pulsate"),"horizontal"==this.orientation?this.__html.bar.style.width="":this.__html.bar.style.height=""):(this.removeClass("photonui-progressbar-pulsate"),this.value=this.value)},_textVisible:!0,isTextVisible:function(){return this._textVisible},setTextVisible:function(a){this._textVisible=a,this.__html.text.style.display=this.textVisible?"":"none"},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-progressbar",this.__html.text=document.createElement("div"),this.__html.text.className="photonui-progressbar-text",this.__html.outer.appendChild(this.__html.text),this.__html.textContent=document.createElement("span"),this.__html.text.appendChild(this.__html.textContent),this.__html.bar=document.createElement("div"),this.__html.bar.className="photonui-progressbar-bar",this.__html.outer.appendChild(this.__html.bar)},__onLocaleChanged:function(){}});b.exports=d},{"../widget.js":50}],46:[function(a,b){var c=a("../widget.js"),d=c.$extend({__init__:function(a){this.$super(a),this._updateProperties(["orientation"])},_orientation:"horizontal",getOrientation:function(){return this._orientation},setOrientation:function(a){if("vertical"!=a&&"horizontal"!=a)throw'Error: The orientation should be "vertical" or "horizontal".';this._orientation=a,this.removeClass("photonui-separator-vertical"),this.removeClass("photonui-separator-horizontal"),this.addClass("photonui-separator-"+this.orientation)},getHtml:function(){return this.__html.outer},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-separator",this.__html.hr=document.createElement("hr"),this.__html.outer.appendChild(this.__html.hr)},__onLocaleChanged:function(){}});b.exports=d},{"../widget.js":50}],47:[function(a,b){var c=a("./baseicon.js"),d=a("./spritesheet.js"),e=c.$extend({__init__:function(a,b){var c={};if(a&&"string"==typeof a){if(c.icon=a,b&&"object"==typeof b)for(var d in b)c[d]=b[d]}else a&&(c=a);this.$super(c)},_spriteSheetName:"",getSpriteSheetName:function(){return this._spriteSheetName},setSpriteSheetName:function(a){this._spriteSheetName=a||"",this._update()},_iconName:"",getIconName:function(){return this._iconName},setIconName:function(a){this._iconName=a||"",this._update()},getIcon:function(){return this.spriteSheetName+"/"+this.iconName},setIcon:function(a){var b=a.split("/");this.spriteSheetName=b[0],this.iconName=b[1]},getHtml:function(){return this.__html.outer},_update:function(){var a="";this.spriteSheetName&&this.iconName&&(a=d.getSpriteSheet(this.spriteSheetName).getIconCss(this.iconName)),this.__html.icon.setAttribute("style",a)},_buildHtml:function(){this.__html.outer=document.createElement("span"),this.__html.outer.className="photonui-widget photonui-icon photonui-spriteicon",this.__html.icon=document.createElement("span"),this.__html.outer.appendChild(this.__html.icon)}});b.exports=e},{"./baseicon.js":41,"./spritesheet.js":48}],48:[function(a,b){var c=a("../base.js"),d={},e=c.$extend({__init__:function(a){this._icons={},this.$super(a),this._updateProperties(["name"])},_name:"default",getName:function(){return this._name},setName:function(a){d[this.name]==this&&delete d[this.name],this._name=a,d[this.name]=this},_imageUrl:null,getImageUrl:function(){return this._imageUrl},setImageUrl:function(a){if(!a)return void(this._imageUrl=null);if(this._imageUrl!=a){this._imageUrl=a;var b=new Image;b.src=a}},_size:16,getSize:function(){return this._size},setSize:function(a){this._size=a},_icons:{},getIcons:function(){return this._icons},setIcons:function(a){for(icon in a)this._icons[icon]=a[icon]},getIconPosition:function(a){return{x:this.icons[a][0],y:this.icons[a][1]}},getIconCss:function(a){return"width: "+this.size+"px; height: "+this.size+"px; background: url("+this.imageUrl+") -"+this.getIconPosition(a).x+"px -"+this.getIconPosition(a).y+"px;"},addIcon:function(a,b,c){this.icons={iconName:[b,c]}},removeIcon:function(a){delete this._icons[a]}});e.getSpriteSheet=function(a){return void 0!==d[a]?d[a]:null},b.exports=e},{"../base.js":4}],49:[function(a,b){var c=a("../../lib/stone.js"),d=a("../widget.js"),e=a("../helpers.js"),f=d.$extend({_lastSet:"text",_raw:"",getText:function(){return this.__html.outer.textContent},setText:function(a){this._lastSet="text",this._raw=a,e.cleanNode(this.__html.outer),this.__html.outer.appendChild(document.createTextNode(a))},getRawHtml:function(){return this.__html.outer.innerHTML},setRawHtml:function(a){this._lastSet="rawHtml",this._raw=a,this.__html.outer.innerHTML=a},getHtml:function(){return this.__html.outer},_buildHtml:function(){this.__html.outer=document.createElement("div"),this.__html.outer.className="photonui-widget photonui-text"},__onLocaleChanged:function(){this.$super(),this._raw instanceof c.LazyString&&(this[this._lastSet]=this._raw)}});b.exports=f},{"../../lib/stone.js":1,"../helpers.js":22,"../widget.js":50}],50:[function(a,b){var c=a("../lib/stone.js"),d=a("./base.js"),e=a("./helpers.js"),f=(a("./photonui.js"),{}),g=d.$extend({__init__:function(a){this.__html={},this._layoutOptions={},this._buildHtml(),this._registerWEvents(["show","hide"]),this.$super(a),this._updateProperties(["visible"]),this.name||(this.name="widget-"+e.uuid4()),a&&a.className&&this.addClass(a.className),this.html&&this._bindEvent("pop-contextmenu",this.html,"contextmenu",this.__onContextMenu.bind(this)),this._bindEvent("locale-changed",document,"stonejs-locale-changed",this.__onLocaleChanged.bind(this)),f[this.name]=this},_name:null,getName:function(){return this._name},setName:function(a){delete f[this.name],this._name=a,f[a]=this,this.html&&(this.html.id=this.name)},_visible:!0,isVisible:function(){return this._visible},setVisible:function(a){this._visible=a,this.html&&(this.visible?(this.html.style.display="",this._callCallbacks("show")):(this.html.style.display="none",this._callCallbacks("hide")))},_tooltip:null,getTooltip:function(){return this._tooltip},setTooltip:function(a){this._tooltip=a,a?this.html.title=a:delete this.html.removeAttribute("title")},_contextMenuName:null,getContextMenuName:function(){return this._contextMenuName},setContextMenuName:function(a){this._contextMenuName=a},getContextMenu:function(){return g.getWidget(this.contextMenuName)},setContextMenu:function(b){var c=a("./container/window/popupwindow.js");this.contextMenuName=b instanceof c?b.name:null},_layoutOptions:{},getLayoutOptions:function(){return this._layoutOptions},setLayoutOptions:function(a){for(option in a)this._layoutOptions[option]=a[option]},getHtml:function(){return console.warn("getHtml() method not implemented for this widget."),null},getAbsolutePosition:function(){return this.html?e.getAbsolutePosition(this.html):{x:0,y:0}},getOffsetWidth:function(){return this.html?this.html.offsetWidth:0},getOffsetHeight:function(){return this.html?this.html.offsetHeight:0},__html:{},show:function(){this.visible=!0},hide:function(){this.visible=!1},destroy:function(){this.$super(),delete f[this.name],this.html&&this.html.parentNode&&this.html.parentNode.removeChild(this.html)},addClass:function(a){if(this.html){var b=this.html.className.split(" ");b.indexOf(a)<0&&b.push(a),this.html.className=b.join(" ")}},removeClass:function(a){if(this.html){var b=this.html.className.split(" "),c=b.indexOf(a);c>=0&&b.splice(c,1),this.html.className=b.join(" ")}},_buildHtml:function(){console.warn("_buildHtml() method not implemented for this widget.")},__onContextMenu:function(a){a.stopPropagation(),a.preventDefault(),this.contextMenuName&&this.contextMenu.popupXY(a.pageX,a.pageY)},__onLocaleChanged:function(){for(var a in this)this[a]instanceof c.LazyString&&(this[a]=this[a])}});g.getWidget=function(a){return void 0!==f[a]?f[a]:null},g.e_parent=null,g.domInsert=function(a,b){var b=b||g.e_parent||document.getElementsByTagName("body")[0];b.appendChild(a.html)},b.exports=g},{"../lib/stone.js":1,"./base.js":4,"./container/window/popupwindow.js":18,"./helpers.js":22,"./photonui.js":40}]},{},[40])(40)});